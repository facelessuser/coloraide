<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A library to aid in using colors"><link href=https://facelessuser.github.io/coloraide/gamut/ rel=canonical><link href=../contrast/ rel=prev><link href=../chromaticity/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.11"><title>Gamut Mapping - ColorAide Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.7e359304.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><script src=../assets/pymdownx-extras/material-extra-theme-TVq-kNRT.js type=text/javascript></script><script src=../assets/pymdownx-extras/material-extra-3rdparty-E-i8w1WA.js type=text/javascript></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/coloraide-extras/extra-728132a6d6.css><link rel=stylesheet href=../assets/pymdownx-extras/extra-fb5a2a1c86.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=dracula data-md-color-primary=deep-purple data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#gamut-mapping class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> <span class=twemoji> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12m-10 5h-2v-2h2v2m0-4h-2V7h2v6Z"/></svg> </span> <a href=../about/contributing/#become-a-sponsor>Sponsorship</a> is now available! <span class="twemoji heart-throb"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M7.655 14.916v-.001h-.002l-.006-.003-.018-.01a22.066 22.066 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22.094 22.094 0 0 1-3.433 2.414 7.152 7.152 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0Z"/></svg> </span> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <a href=https://facelessuser.github.io/coloraide/ title="ColorAide Documentation" class="md-header__button md-logo" aria-label="ColorAide Documentation"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5V2M6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ColorAide Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Gamut Mapping </span> </div> </div> </div> <div class=md-header__options> <div class="md-header-nav__scheme md-header-nav__button md-source__icon md-icon"> <a href=javascript:toggleScheme(); title="Light mode" class=light-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg> </a> <a href=javascript:toggleScheme(); title="Dark mode" class=dark-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </a> <a href=javascript:toggleScheme(); title="System preference" class=system-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07 19.07 3.5m-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13.51 1.67m-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87.4 1.31M19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35-2.53-2.2m4.33-2.7 1.15-2.77 2.2 2.54-3.35.23m1.15-4.96-1.14-2.78 3.34.24-2.2 2.54M9.63 18.93l2.77 1.15-2.53 2.19-.24-3.34Z"/></svg> </a> <a href=javascript:toggleScheme(); title="Unknown scheme" class=unknown-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10Z"/></svg> </a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/facelessuser/coloraide title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class="md-tabs__item md-tabs__item--active"> <a href=.. class=md-tabs__link> ColorAide </a> </li> <li class=md-tabs__item> <a href=../colors/ class=md-tabs__link> Color Spaces </a> </li> <li class=md-tabs__item> <a href=../plugins/ class=md-tabs__link> Plugins </a> </li> <li class=md-tabs__item> <a href=../demos/ class=md-tabs__link> Demos </a> </li> <li class=md-tabs__item> <a href=../api/ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=../playground/ class=md-tabs__link> Playground </a> </li> <li class=md-tabs__item> <a href=../about/contributing/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="ColorAide Documentation" class="md-nav__button md-logo" aria-label="ColorAide Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5V2M6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5Z"/></svg> </a> ColorAide Documentation </label> <div class=md-nav__source> <a href=https://github.com/facelessuser/coloraide title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1 checked> <div class="md-nav__link md-nav__container"> <a href=.. class="md-nav__link "> <span class=md-ellipsis> ColorAide </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=true> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> ColorAide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../color/ class=md-nav__link> <span class=md-ellipsis> The Color Object </span> </a> </li> <li class=md-nav__item> <a href=../manipulation/ class=md-nav__link> <span class=md-ellipsis> Manipulating Colors </span> </a> </li> <li class=md-nav__item> <a href=../interpolation/ class=md-nav__link> <span class=md-ellipsis> Color Interpolation </span> </a> </li> <li class=md-nav__item> <a href=../average/ class=md-nav__link> <span class=md-ellipsis> Color Averaging </span> </a> </li> <li class=md-nav__item> <a href=../compositing/ class=md-nav__link> <span class=md-ellipsis> Compositing and Blending </span> </a> </li> <li class=md-nav__item> <a href=../distance/ class=md-nav__link> <span class=md-ellipsis> Color Distance and Delta E </span> </a> </li> <li class=md-nav__item> <a href=../filters/ class=md-nav__link> <span class=md-ellipsis> Filters </span> </a> </li> <li class=md-nav__item> <a href=../harmonies/ class=md-nav__link> <span class=md-ellipsis> Color Harmonies </span> </a> </li> <li class=md-nav__item> <a href=../contrast/ class=md-nav__link> <span class=md-ellipsis> Contrast </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Gamut Mapping </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Gamut Mapping </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#checking-gamut class=md-nav__link> <span class=md-ellipsis> Checking Gamut </span> </a> <nav class=md-nav aria-label="Checking Gamut"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tolerance class=md-nav__link> <span class=md-ellipsis> Tolerance </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gamut-mapping-colors class=md-nav__link> <span class=md-ellipsis> Gamut Mapping Colors </span> </a> <nav class=md-nav aria-label="Gamut Mapping Colors"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#clip class=md-nav__link> <span class=md-ellipsis> Clip </span> </a> </li> <li class=md-nav__item> <a href=#minde-chroma-reduction class=md-nav__link> <span class=md-ellipsis> MINDE Chroma Reduction </span> </a> <nav class=md-nav aria-label="MINDE Chroma Reduction"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lch-chroma class=md-nav__link> <span class=md-ellipsis> LCh Chroma </span> </a> </li> <li class=md-nav__item> <a href=#oklch-chroma class=md-nav__link> <span class=md-ellipsis> OkLCh Chroma </span> </a> </li> <li class=md-nav__item> <a href=#hct-chroma class=md-nav__link> <span class=md-ellipsis> HCT Chroma </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ray-tracing-chroma-reduction class=md-nav__link> <span class=md-ellipsis> Ray Tracing Chroma Reduction </span> </a> <nav class=md-nav aria-label="Ray Tracing Chroma Reduction"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lch-ray-tracing-chroma-reduction class=md-nav__link> <span class=md-ellipsis> LCh Ray Tracing Chroma Reduction </span> </a> </li> <li class=md-nav__item> <a href=#oklch-ray-tracing-chroma-reduction class=md-nav__link> <span class=md-ellipsis> OkLCh Ray Tracing Chroma Reduction </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#why-not-just-clip class=md-nav__link> <span class=md-ellipsis> Why Not Just Clip? </span> </a> </li> <li class=md-nav__item> <a href=#pointers-gamut class=md-nav__link> <span class=md-ellipsis> Pointer's Gamut </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../chromaticity/ class=md-nav__link> <span class=md-ellipsis> Chromaticity </span> </a> </li> <li class=md-nav__item> <a href=../temperature/ class=md-nav__link> <span class=md-ellipsis> Correlated Color Temperature </span> </a> </li> <li class=md-nav__item> <a href=../cat/ class=md-nav__link> <span class=md-ellipsis> Chromatic Adaptation </span> </a> </li> <li class=md-nav__item> <a href=../strings/ class=md-nav__link> <span class=md-ellipsis> String Output </span> </a> </li> <li class=md-nav__item> <a href=../advanced/ class=md-nav__link> <span class=md-ellipsis> Advanced Topics </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../colors/ class="md-nav__link "> <span class=md-ellipsis> Color Spaces </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Color Spaces </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> RGB Color Spaces </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> RGB Color Spaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../colors/srgb/ class=md-nav__link> <span class=md-ellipsis> sRGB </span> </a> </li> <li class=md-nav__item> <a href=../colors/display_p3/ class=md-nav__link> <span class=md-ellipsis> Display P3 </span> </a> </li> <li class=md-nav__item> <a href=../colors/a98_rgb/ class=md-nav__link> <span class=md-ellipsis> A98 RGB </span> </a> </li> <li class=md-nav__item> <a href=../colors/rec2020/ class=md-nav__link> <span class=md-ellipsis> Rec. 2020 </span> </a> </li> <li class=md-nav__item> <a href=../colors/prophoto_rgb/ class=md-nav__link> <span class=md-ellipsis> ProPhoto RGB </span> </a> </li> <li class=md-nav__item> <a href=../colors/rec709/ class=md-nav__link> <span class=md-ellipsis> Rec. 709 </span> </a> </li> <li class=md-nav__item> <a href=../colors/rec2100_pq/ class=md-nav__link> <span class=md-ellipsis> Rec. 2100 PQ </span> </a> </li> <li class=md-nav__item> <a href=../colors/rec2100_hlg/ class=md-nav__link> <span class=md-ellipsis> Rec. 2100 HLG </span> </a> </li> <li class=md-nav__item> <a href=../colors/srgb_linear/ class=md-nav__link> <span class=md-ellipsis> Linear sRGB </span> </a> </li> <li class=md-nav__item> <a href=../colors/display_p3_linear/ class=md-nav__link> <span class=md-ellipsis> Linear Display P3 </span> </a> </li> <li class=md-nav__item> <a href=../colors/a98_rgb_linear/ class=md-nav__link> <span class=md-ellipsis> Linear A98 RGB </span> </a> </li> <li class=md-nav__item> <a href=../colors/rec2020_linear/ class=md-nav__link> <span class=md-ellipsis> Linear Rec. 2020 </span> </a> </li> <li class=md-nav__item> <a href=../colors/rec2100_linear/ class=md-nav__link> <span class=md-ellipsis> Linear Rec. 2100 </span> </a> </li> <li class=md-nav__item> <a href=../colors/prophoto_rgb_linear/ class=md-nav__link> <span class=md-ellipsis> Linear ProPhoto RGB </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Cylindrical sRGB Spaces </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Cylindrical sRGB Spaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../colors/hsv/ class=md-nav__link> <span class=md-ellipsis> HSV </span> </a> </li> <li class=md-nav__item> <a href=../colors/hsl/ class=md-nav__link> <span class=md-ellipsis> HSL </span> </a> </li> <li class=md-nav__item> <a href=../colors/hwb/ class=md-nav__link> <span class=md-ellipsis> HWB </span> </a> </li> <li class=md-nav__item> <a href=../colors/hsi/ class=md-nav__link> <span class=md-ellipsis> HSI </span> </a> </li> <li class=md-nav__item> <a href=../colors/okhsv/ class=md-nav__link> <span class=md-ellipsis> Okhsv </span> </a> </li> <li class=md-nav__item> <a href=../colors/okhsl/ class=md-nav__link> <span class=md-ellipsis> Okhsl </span> </a> </li> <li class=md-nav__item> <a href=../colors/hsluv/ class=md-nav__link> <span class=md-ellipsis> HSLuv </span> </a> </li> <li class=md-nav__item> <a href=../colors/hpluv/ class=md-nav__link> <span class=md-ellipsis> HPLuv </span> </a> </li> <li class=md-nav__item> <a href=../colors/cubehelix/ class=md-nav__link> <span class=md-ellipsis> Cubehelix </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> XYZ Spaces </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> XYZ Spaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../colors/xyz_d65/ class=md-nav__link> <span class=md-ellipsis> XYZ D65 </span> </a> </li> <li class=md-nav__item> <a href=../colors/xyz_d50/ class=md-nav__link> <span class=md-ellipsis> XYZ D50 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class=md-ellipsis> Lab Like Spaces </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Lab Like Spaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../colors/lab/ class=md-nav__link> <span class=md-ellipsis> Lab D50 </span> </a> </li> <li class=md-nav__item> <a href=../colors/lab_d65/ class=md-nav__link> <span class=md-ellipsis> Lab D65 </span> </a> </li> <li class=md-nav__item> <a href=../colors/oklab/ class=md-nav__link> <span class=md-ellipsis> Oklab </span> </a> </li> <li class=md-nav__item> <a href=../colors/luv/ class=md-nav__link> <span class=md-ellipsis> Luv </span> </a> </li> <li class=md-nav__item> <a href=../colors/din99o/ class=md-nav__link> <span class=md-ellipsis> DIN99o </span> </a> </li> <li class=md-nav__item> <a href=../colors/jzazbz/ class=md-nav__link> <span class=md-ellipsis> Jzazbz </span> </a> </li> <li class=md-nav__item> <a href=../colors/hunter_lab/ class=md-nav__link> <span class=md-ellipsis> Hunter Lab </span> </a> </li> <li class=md-nav__item> <a href=../colors/rlab/ class=md-nav__link> <span class=md-ellipsis> RLAB </span> </a> </li> <li class=md-nav__item> <a href=../colors/ipt/ class=md-nav__link> <span class=md-ellipsis> IPT </span> </a> </li> <li class=md-nav__item> <a href=../colors/ictcp/ class=md-nav__link> <span class=md-ellipsis> ICtCp </span> </a> </li> <li class=md-nav__item> <a href=../colors/igpgtg/ class=md-nav__link> <span class=md-ellipsis> IgPgTg </span> </a> </li> <li class=md-nav__item> <a href=../colors/cam16_ucs/ class=md-nav__link> <span class=md-ellipsis> CAM16 UCS </span> </a> </li> <li class=md-nav__item> <a href=../colors/cam16_scd/ class=md-nav__link> <span class=md-ellipsis> CAM16 SCD </span> </a> </li> <li class=md-nav__item> <a href=../colors/cam16_lcd/ class=md-nav__link> <span class=md-ellipsis> CAM16 LCD </span> </a> </li> <li class=md-nav__item> <a href=../colors/xyb/ class=md-nav__link> <span class=md-ellipsis> XYB </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6 id=__nav_2_6_label tabindex=0> <span class=md-ellipsis> LCh Like Spaces </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> LCh Like Spaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../colors/lch/ class=md-nav__link> <span class=md-ellipsis> LCh D50 </span> </a> </li> <li class=md-nav__item> <a href=../colors/lch_d65/ class=md-nav__link> <span class=md-ellipsis> LCh D65 </span> </a> </li> <li class=md-nav__item> <a href=../colors/oklch/ class=md-nav__link> <span class=md-ellipsis> OkLCh </span> </a> </li> <li class=md-nav__item> <a href=../colors/lchuv/ class=md-nav__link> <span class=md-ellipsis> LCh(uv) </span> </a> </li> <li class=md-nav__item> <a href=../colors/lch99o/ class=md-nav__link> <span class=md-ellipsis> DIN99 LCh </span> </a> </li> <li class=md-nav__item> <a href=../colors/jzczhz/ class=md-nav__link> <span class=md-ellipsis> JzCzhz </span> </a> </li> <li class=md-nav__item> <a href=../colors/cam16_jmh/ class=md-nav__link> <span class=md-ellipsis> CAM16 JMh </span> </a> </li> <li class=md-nav__item> <a href=../colors/hct/ class=md-nav__link> <span class=md-ellipsis> HCT </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex=0> <span class=md-ellipsis> ACES Spaces </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> ACES Spaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../colors/aces2065_1/ class=md-nav__link> <span class=md-ellipsis> ACES 2065-1 </span> </a> </li> <li class=md-nav__item> <a href=../colors/acescg/ class=md-nav__link> <span class=md-ellipsis> ACEScg </span> </a> </li> <li class=md-nav__item> <a href=../colors/acescc/ class=md-nav__link> <span class=md-ellipsis> ACEScc </span> </a> </li> <li class=md-nav__item> <a href=../colors/acescct/ class=md-nav__link> <span class=md-ellipsis> ACEScct </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8 id=__nav_2_8_label tabindex=0> <span class=md-ellipsis> Miscellaneous Spaces </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> Miscellaneous Spaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../colors/xyy/ class=md-nav__link> <span class=md-ellipsis> xyY </span> </a> </li> <li class=md-nav__item> <a href=../colors/ucs/ class=md-nav__link> <span class=md-ellipsis> CIE 1960 UCS </span> </a> </li> <li class=md-nav__item> <a href=../colors/ryb/ class=md-nav__link> <span class=md-ellipsis> RYB </span> </a> </li> <li class=md-nav__item> <a href=../colors/cmy/ class=md-nav__link> <span class=md-ellipsis> CMY </span> </a> </li> <li class=md-nav__item> <a href=../colors/cmyk/ class=md-nav__link> <span class=md-ellipsis> CMYK </span> </a> </li> <li class=md-nav__item> <a href=../colors/orgb/ class=md-nav__link> <span class=md-ellipsis> oRGB </span> </a> </li> <li class=md-nav__item> <a href=../colors/prismatic/ class=md-nav__link> <span class=md-ellipsis> Prismatic </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../plugins/ class="md-nav__link "> <span class=md-ellipsis> Plugins </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Plugins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../plugins/delta_e/ class=md-nav__link> <span class=md-ellipsis> Delta E </span> </a> </li> <li class=md-nav__item> <a href=../plugins/fit/ class=md-nav__link> <span class=md-ellipsis> Fit/Gamut Mapping </span> </a> </li> <li class=md-nav__item> <a href=../plugins/cat/ class=md-nav__link> <span class=md-ellipsis> Chromatic Adaptation </span> </a> </li> <li class=md-nav__item> <a href=../plugins/filter/ class=md-nav__link> <span class=md-ellipsis> Filters </span> </a> </li> <li class=md-nav__item> <a href=../plugins/contrast/ class=md-nav__link> <span class=md-ellipsis> Contrast </span> </a> </li> <li class=md-nav__item> <a href=../plugins/space/ class=md-nav__link> <span class=md-ellipsis> Color Spaces </span> </a> </li> <li class=md-nav__item> <a href=../plugins/interpolate/ class=md-nav__link> <span class=md-ellipsis> Interpolation </span> </a> </li> <li class=md-nav__item> <a href=../plugins/cct/ class=md-nav__link> <span class=md-ellipsis> CCT </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../demos/ class="md-nav__link "> <span class=md-ellipsis> Demos </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../demos/colorpicker.html class=md-nav__link> <span class=md-ellipsis> Color Picker </span> </a> </li> <li class=md-nav__item> <a href=../demos/3d_models.html class=md-nav__link> <span class=md-ellipsis> 3D Color Space Models </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../api/ class="md-nav__link "> <span class=md-ellipsis> API </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../playground/ class=md-nav__link> <span class=md-ellipsis> Playground </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../about/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing &amp; Support </span> </a> </li> <li class=md-nav__item> <a href=../about/acknowledgments/ class=md-nav__link> <span class=md-ellipsis> Acknowledgments </span> </a> </li> <li class=md-nav__item> <a href=../about/changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../about/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_5> <label class=md-nav__link for=__nav_7_5 id=__nav_7_5_label tabindex=0> <span class=md-ellipsis> Migration Notes </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_5_label aria-expanded=false> <label class=md-nav__title for=__nav_7_5> <span class="md-nav__icon md-icon"></span> Migration Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../about/releases/1.0/ class=md-nav__link> <span class=md-ellipsis> 1.0 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#checking-gamut class=md-nav__link> <span class=md-ellipsis> Checking Gamut </span> </a> <nav class=md-nav aria-label="Checking Gamut"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tolerance class=md-nav__link> <span class=md-ellipsis> Tolerance </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gamut-mapping-colors class=md-nav__link> <span class=md-ellipsis> Gamut Mapping Colors </span> </a> <nav class=md-nav aria-label="Gamut Mapping Colors"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#clip class=md-nav__link> <span class=md-ellipsis> Clip </span> </a> </li> <li class=md-nav__item> <a href=#minde-chroma-reduction class=md-nav__link> <span class=md-ellipsis> MINDE Chroma Reduction </span> </a> <nav class=md-nav aria-label="MINDE Chroma Reduction"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lch-chroma class=md-nav__link> <span class=md-ellipsis> LCh Chroma </span> </a> </li> <li class=md-nav__item> <a href=#oklch-chroma class=md-nav__link> <span class=md-ellipsis> OkLCh Chroma </span> </a> </li> <li class=md-nav__item> <a href=#hct-chroma class=md-nav__link> <span class=md-ellipsis> HCT Chroma </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ray-tracing-chroma-reduction class=md-nav__link> <span class=md-ellipsis> Ray Tracing Chroma Reduction </span> </a> <nav class=md-nav aria-label="Ray Tracing Chroma Reduction"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lch-ray-tracing-chroma-reduction class=md-nav__link> <span class=md-ellipsis> LCh Ray Tracing Chroma Reduction </span> </a> </li> <li class=md-nav__item> <a href=#oklch-ray-tracing-chroma-reduction class=md-nav__link> <span class=md-ellipsis> OkLCh Ray Tracing Chroma Reduction </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#why-not-just-clip class=md-nav__link> <span class=md-ellipsis> Why Not Just Clip? </span> </a> </li> <li class=md-nav__item> <a href=#pointers-gamut class=md-nav__link> <span class=md-ellipsis> Pointer's Gamut </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=gamut-mapping>Gamut Mapping<a class=headerlink href=#gamut-mapping title="Permanent link"></a></h1> <p>Many color spaces are designed in such a way that they represent a specific range of colors. This is often done to target specific display types or mediums. The monitor you are reading this on can likely display millions of colors, but there are still colors it is not capable of displaying. So color spaces are often designed to represent such mediums, to make it easy for authors and artists to know exactly where those color boundaries are. This range of colors that a color space is designed for is called a color gamut.</p> <p>There are some color spaces that are theoretically unbounded, and even some color spaces that are bounded but can actually still give meaningful data if extended, but often, when it comes time to display a color, paint an a product, print a book, the actual colors are limited to what that device or process can handle.</p> <p>The sRGB and Display P3 color spaces are both RGB color spaces, but they actually can represent a different amount of colors. Display P3 has a wider gamut and allows for greener greens and redder reds, etc. In the image below, we show four different RGB color spaces, each with varying different gamut sizes. Display P3 contains all the colors in sRGB and extends it even further. Rec. 2020, another RGB color space, is even wider. ProPhoto is so wide that it contains colors that the human eye can't even see.</p> <p><img alt="Gamut Comparison" src=../images/gamut-compare.png></p> <p>In order to visually represent a color from a wider gamut color space, such as Display P3, in a more narrow color space, such as sRGB, a suitable color within the more narrow color space must must be selected and be shown in its place. This selecting of a suitable replacement is called gamut mapping.</p> <p>ColorAide defines a couple methods to help identify when a color is outside the gamut bounds of a color space and to help find a suitable, alternative color that is within the gamut.</p> <h2 id=checking-gamut>Checking Gamut<a class=headerlink href=#checking-gamut title="Permanent link"></a></h2> <p>When dealing with colors, it can be important to know whether a color is within its own gamut. The <code>in_gamut</code> function allows for comparing the current color's specified values against the color space's gamut.</p> <p>Let's assume we have a color <span><span class="swatch out-of-gamut" title="rgb(30% 105% 0%)"><span class=swatch-color style="--swatch-stops: #6bff3a,#6bff3a;"></span></span><code class=highlight><span class=nf>rgb</span><span class=g>(</span><span class=m>30</span><span class=k>%</span><span class=w> </span><span class=m>105</span><span class=k>%</span><span class=w> </span><span class=m>0</span><span class=k>%</span><span class=g>)</span></code></span>. The color is out of gamut due to the green channel exceeding the channel's limit of <code class=highlight><span class=mi>100</span><span class=o>%</span></code>. When we execute <code>in_gamut</code>, we can see that the color is not in its own gamut.</p> <div class=playground id=__playground_0> <div class=playground-results id=__playground-results_0> <div class=color-command><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s2>&quot;rgb(30</span><span class=si>% 105%</span><span class=s2> 0%)&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>()</span>
<span class=go>False</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_0 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_0 spellcheck=false>Color("rgb(30% 105% 0%)").in_gamut()</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_0 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_0 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_0 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_0 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>On the other hand, some color spaces do not have a limit. CIELab is one such color space. Sometimes limits will be placed on the color space channels for practicality, but theoretically, there are no bounds. When we check a CIELab color, we will find that it is always considered in gamut.</p> <div class=playground id=__playground_1> <div class=playground-results id=__playground-results_1> <div class=color-command><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s2>&quot;lab(200% -20 40 / 1)&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>()</span>
<span class=go>True</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_1 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_1 spellcheck=false>Color("lab(200% -20 40 / 1)").in_gamut()</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_1 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_1 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_1 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_1 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>While checking CIELab's own gamut isn't very useful, we can test it against a different color space's gamut. By simply passing in the name of a different color space, the current color will be converted to the provided space and then will run <code>in_gamut</code> on the new color. You could do this manually, but using <code>in_gamut</code> in this manner can be very convenient. In the example below, we can see that the CIELab color of <span><span class="swatch out-of-gamut" title="lab(200% -20 40 / 1)"><span class=swatch-color style="--swatch-stops: #ffffff,#ffffff;"></span></span><code class=highlight><span class=nf>lab</span><span class=g>(</span><span class=m>200</span><span class=k>%</span><span class=w> </span><span class=g>-</span><span class=m>20</span><span class=w> </span><span class=m>40</span><span class=w> </span><span class=g>/</span><span class=w> </span><span class=m>1</span><span class=g>)</span></code></span> is outside the narrow gamut of sRGB.</p> <div class=playground id=__playground_2> <div class=playground-results id=__playground-results_2> <div class=color-command><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s2>&quot;lab(200% -20 40 / 1)&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span>
<span class=go>False</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_2 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_2 spellcheck=false>Color("lab(200% -20 40 / 1)").in_gamut('srgb')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_2 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_2 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_2 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_2 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <h3 id=tolerance>Tolerance<a class=headerlink href=#tolerance title="Permanent link"></a></h3> <p>Generally, ColorAide does not round off values in order to guarantee the best possible values for round tripping, but due to <a href=https://docs.python.org/3/tutorial/floatingpoint.html#floating-point-arithmetic-issues-and-limitations>limitations of floating-point arithmetic</a> and precision of conversion algorithms, there can be edge cases where colors don't round trip perfectly. By default, <code>in_gamut</code> allows for a tolerance of <code class=highlight><span class=mf>0.000075</span></code> to account for such cases where a color is "close enough". If desired, this "tolerance" can be adjusted.</p> <p>Let's consider the oRGB color model. When converting from sRGB to oRGB, both of which share the same gamut, we can see that the conversion back is very, very close to being correct, but still technically out of gamut with one channel value falling below zero, but only slightly. This is due to the perils of floating point arithmetic.</p> <div class=playground id=__playground_3> <div class=playground-results id=__playground-results_3> <div class=color-command><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;orgb&#39;</span><span class=p>)[:]</span>
<span class=go>[0.299, 1.905283832848159e-05, 0.9999779995764854, 1.0]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;orgb&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)[:]</span>
<span class=go>[1.0, 1.1102230246251565e-16, -1.3877787807814457e-16, 1.0]</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_3 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_3 spellcheck=false>Color('red').convert('orgb')[:]
Color('red').convert('orgb').convert('srgb')[:]</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_3 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_3 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_3 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_3 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>When testing with a tolerance, the color is considered in gamut, but when testing with a tolerance of zero, the color is considered out of gamut. Depending on what you are doing, this may not be an issue up until you are ready to finalize the color as very close to in gamut is usually good enough, so sometimes it may be desirable to have some tolerance, and other times not.</p> <div class=playground id=__playground_4> <div class=playground-results id=__playground-results_4> <div class=color-command><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;orgb&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)[:]</span>
<span class=go>[1.0, 1.1102230246251565e-16, -1.3877787807814457e-16, 1.0]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;orgb&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>()</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;orgb&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=n>tolerance</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=go>False</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_4 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_4 spellcheck=false>Color('red').convert('orgb').convert('srgb')[:]
Color('red').convert('orgb').convert('srgb').in_gamut()
Color('red').convert('orgb').convert('srgb').in_gamut(tolerance=0)</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_4 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_4 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_4 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_4 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>Let's consider some color models that handle out of gamut colors in a less subtle way. HSL, HSV, and HWB are color models designed to represent an RGB color space in a cylindrical format, traditionally sRGB. Each of these spaces isolate different attributes of a color: saturation, whiteness, lightness, etc. Because these models are just representing the color space in a different way, they share the same gamut as the reference RGB color space. So it stands to reason that simply using the sRGB gamut check for them should be sufficient, and if we are using strict tolerance, this would be true.</p> <div class=playground id=__playground_5> <div class=playground-results id=__playground-results_5> <div class=color-command><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;rgb(255 255 255)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>tolerance</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;hsl(0 0</span><span class=si>% 100%</span><span class=s1>)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>tolerance</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;color(--hsv 0 0</span><span class=si>% 100%</span><span class=s1>)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>tolerance</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;rgb(255.05 255 255)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>tolerance</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=go>False</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;hsl(0 0</span><span class=si>% 100.05%</span><span class=s1>)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>tolerance</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=go>False</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;color(--hsv 0 0</span><span class=si>% 100.05%</span><span class=s1>)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>tolerance</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=go>False</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_5 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_5 spellcheck=false>Color('rgb(255 255 255)').in_gamut('srgb', tolerance=0)
Color('hsl(0 0% 100%)').in_gamut('srgb', tolerance=0)
Color('color(--hsv 0 0% 100%)').in_gamut('srgb', tolerance=0)
Color('rgb(255.05 255 255)').in_gamut('srgb', tolerance=0)
Color('hsl(0 0% 100.05%)').in_gamut('srgb', tolerance=0)
Color('color(--hsv 0 0% 100.05%)').in_gamut('srgb', tolerance=0)</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_5 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_5 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_5 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_5 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>But when we are using a tolerance, and we check one of these models <strong>only</strong> using the sRGB gamut, there are some cases where these cylindrical colors can exhibit coordinates wildly outside of the model's range but still very close to the sRGB gamut. This is isn't an error or a bug, but simply how the color model behaves with out of gamut colors. These values can still convert right back to the original color, but this might not always be the case with all color models.</p> <p>In this example, we have an sRGB color that is extremely close to being in gamut, but when we convert it to HSL, we can see wildly large saturation. But since it round trips back to sRGB just fine, it can exhibit extreme saturation, but can still be considered in the sRGB gamut.</p> <div class=playground id=__playground_6> <div class=playground-results id=__playground-results_6> <div class=color-command><div class=swatch-bar><span class=swatch title="hsl(300 300% 100%)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 255 255) 50%, rgb(255 255 255) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>hsl</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;color(srgb 0.999999 1.000002 0.999999)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;hsl&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>hsl</span>
<span class=go>color(--hsl 300 3 1 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>hsl</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span>
<span class=go>True</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_6 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_6 spellcheck=false>hsl = Color('color(srgb 0.999999 1.000002 0.999999)').convert('hsl')
hsl
hsl.in_gamut('srgb')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_6 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_6 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_6 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_6 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>This happens because these cylindrical color models do not represent out of gamut colors in a very sane way. When lightness exceeds the <abbr title="Standard Dynamic Range">SDR</abbr> range of 0 - 1 (or <code>0 - 100%</code> as people generally associate HSL), they can return extremely high saturation. So even a slightly out of gamut sRGB color <em>could</em> translate to a value way outside the cylindrical color model's boundaries.</p> <p>For this reason, gamut checks in the HSL, HSV, and HWB models apply tolerance checks on the color's coordinates in the sRGB color space <strong>and</strong> the respective cylindrical model ensuring we have coordinates that are close to the color's actual gamut and reasonably close to the cylindrical model's constraints as well. But if we specifically request <code>srgb</code>, we will see that only <code>srgb</code> is referenced.</p> <div class=playground id=__playground_7> <div class=playground-results id=__playground-results_7> <div class=color-command><div class=swatch-bar><span class=swatch title="hsl(300 300% 100%)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 255 255) 50%, rgb(255 255 255) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>hsl</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;color(srgb 0.999999 1.000002 0.999999)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;hsl&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>hsl</span>
<span class=go>color(--hsl 300 3 1 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>hsl</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>()</span>
<span class=go>False</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>hsl</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;hsl&#39;</span><span class=p>)</span>
<span class=go>False</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>hsl</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span>
<span class=go>True</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_7 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_7 spellcheck=false>hsl = Color('color(srgb 0.999999 1.000002 0.999999)').convert('hsl')
hsl
hsl.in_gamut()
hsl.in_gamut('hsl')
hsl.in_gamut('srgb')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_7 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_7 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_7 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_7 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>In short, ColorAide will figure out what best to test unless you explicitly tell it to use something else. If the Cartesian check is the only desired check, and the strange cylindrical values that are returned are not a problem, <code>srgb</code> can always be specified. <code class=highlight><span class=n>tolerance</span><span class=o>=</span><span class=mi>0</span></code> can also be used to constrain the check to values exactly in the gamut.</p> <p>HSL has a very tight conversion to and from sRGB, so when an sRGB color is precisely in gamut, it will remain in gamut throughout the conversion to and from HSL, both forwards and backwards. On the other hand, there may be color models that have a looser conversion algorithm. There may even be cases where it may be beneficial to increase the threshold.</p> <h2 id=gamut-mapping-colors>Gamut Mapping Colors<a class=headerlink href=#gamut-mapping-colors title="Permanent link"></a></h2> <p>Gamut mapping is the process of taking a color that is out of gamut and adjusting it in such a way that it fits within the gamut. There are various ways to map or compress values of an out of bound color to an in bound color, each with their own pros and cons. ColorAide offers a couple of methods related to gamut mapping: <code class=highlight><span class=n>clip</span><span class=p>()</span></code> and <code class=highlight><span class=n>fit</span><span class=p>()</span></code>. <code class=highlight><span class=n>clip</span><span class=p>()</span></code> is a dedicated function that performs the speedy, yet naive, approach of simply truncating a color channel's value to fit within the specified gamut, and <code class=highlight><span class=n>fit</span><span class=p>()</span></code> is a method that allows you to do more advanced gamut mapping approaches that, while often not as performant as simple, naive clipping, generally yield much better results.</p> <p>While clipping won't always yield the best results, clipping is still very important and can be used to trim channel noise after certain mathematical operations or even used in other gamut mapping algorithms if used carefully. For this reason, clip has its own dedicated method for quick access: <code class=highlight><span class=n>clip</span><span class=p>()</span></code>.</p> <div class=playground id=__playground_8> <div class=playground-results id=__playground-results_8> <div class=color-command><div class=swatch-bar><span class=swatch title="rgb(255 30 120)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 30 120) 50%, rgb(255 30 120) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;rgb(270 30 120)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>clip</span><span class=p>()</span>
<span class=go>color(srgb 1 0.11765 0.47059 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_8 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_8 spellcheck=false>Color('rgb(270 30 120)').clip()</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_8 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_8 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_8 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_8 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>The <code class=highlight><span class=n>fit</span><span class=p>()</span></code> method, is the generic gamut mapping method that exposes access to all the different gamut mapping methods available. By default, <code class=highlight><span class=n>fit</span><span class=p>()</span></code> uses a more advanced method of gamut mapping that tries to preserve hue and lightness, hue being the attribute the human eye is most sensitive to. If desired, a user can also specify any currently registered gamut mapping algorithm via the <code>method</code> parameter.</p> <div class=playground id=__playground_9> <div class=playground-results id=__playground-results_9> <div class=color-command><div class=swatch-bar><span class=swatch title="rgb(255 46.655 120.92)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 46.655 120.92) 50%, rgb(255 46.655 120.92) 50%"></span></span> <span class=swatch title="rgb(255 30 120)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 30 120) 50%, rgb(255 30 120) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;rgb(270 30 120)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>()</span>
<span class=go>color(srgb 1 0.18296 0.47421 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;rgb(270 30 120)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;clip&#39;</span><span class=p>)</span>
<span class=go>color(srgb 1 0.11765 0.47059 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_9 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_9 spellcheck=false>Color('rgb(270 30 120)').fit()
Color('rgb(270 30 120)').fit(method='clip')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_9 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_9 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_9 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_9 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>Gamut mapping can also be used to indirectly fit colors in another gamut. For instance, fitting a Display P3 color into an sRGB gamut.</p> <div class=playground id=__playground_10> <div class=playground-results id=__playground-results_10> <div class=color-command><div class=swatch-bar><span class=swatch title="color(display-p3 0.9986 0.99232 0.32855)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 252.97 0) 50%, rgb(255 252.97 0) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>c1</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;color(display-p3 1 1 0)&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c1</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span>
<span class=go>False</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c1</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span>
<span class=go>color(display-p3 0.9986 0.99232 0.32855 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c1</span><span class=o>.</span><span class=n>in_gamut</span><span class=p>()</span>
<span class=go>True</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_10 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_10 spellcheck=false>c1 = Color('color(display-p3 1 1 0)')
c1.in_gamut('srgb')
c1.fit('srgb')
c1.in_gamut()</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_10 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_10 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_10 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_10 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>This can also be done with <code class=highlight><span class=n>clip</span><span class=p>()</span></code>.</p> <div class=playground id=__playground_11> <div class=playground-results id=__playground-results_11> <div class=color-command><div class=swatch-bar><span class=swatch title="color(display-p3 1 1 0.3309)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 255 0) 50%, rgb(255 255 0) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;color(display-p3 1 1 0)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>clip</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span>
<span class=go>color(display-p3 1 1 0.3309 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_11 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_11 spellcheck=false>Color('color(display-p3 1 1 0)').clip('srgb')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_11 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_11 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_11 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_11 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <div class="admonition warning"> <p class=admonition-title>Indirectly Gamut Mapping a Color Space</p> <p>When indirectly gamut mapping in another color space, results may vary depending on what color space you are in and what color space you are using to fit the color. The operation may not get the color precisely in gamut. This is because we must convert the color to the gamut mapping space, apply the gamut mapping, and then convert it back to the original color. The process will be subject to any errors that occur in the <a href=#notes-on-round-trip-accuracy>round trip</a> to and from the targeted space. This is mainly mentioned as fitting in one color space and round tripping back may not give exact results and, in some cases, exceed "in gamut" thresholds.</p> </div> <p>There are actually many different ways to gamut map a color. Some are computationally expensive, some are quite simple, and many do really good in some cases and not so well in others. There is probably no perfect gamut mapping method, but some are better than others.</p> <h3 id=clip>Clip<a class=headerlink href=#clip title="Permanent link"></a></h3> <div class="admonition success"> <p class=admonition-title>The <code>clip</code> gamut mapping is registered in <code>Color</code> by default and cannot be unregistered</p> </div> <p>Clipping is a simple and naive approach to gamut mapping. If the color space is bounded by a gamut, clip will compare each channel's value against the bounds for that channel set the value to the limit it exceeds.</p> <p>Clip can be performed via <code>fit</code> by using the method name <code>clip</code> or by using the <code>clip()</code> method.</p> <div class=playground id=__playground_12> <div class=playground-results id=__playground-results_12> <div class=color-command><div class=swatch-bar><span class=swatch title="rgb(255 255 255)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 255 255) 50%, rgb(255 255 255) 50%"></span></span> <span class=swatch title="rgb(255 255 255)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 255 255) 50%, rgb(255 255 255) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>c</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mf>1.5</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;clip&#39;</span><span class=p>)</span>
<span class=go>color(srgb 1 1 1 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mf>1.5</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c</span><span class=o>.</span><span class=n>clip</span><span class=p>()</span>
<span class=go>color(srgb 1 1 1 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_12 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_12 spellcheck=false>c = Color('srgb', [2, 1, 1.5])
c.fit(method='clip')
c = Color('srgb', [2, 1, 1.5])
c.clip()</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_12 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_12 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_12 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_12 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>Clipping is unique to all other clipping methods in that it has its own dedicated method <code>clip()</code> method and that its method name <code>clip</code> is reserved. While not always the best approach for gamut mapping in general, clip is very important to some other gamut mapping and has specific cases where its speed and simplicity are of great value.</p> <h3 id=minde-chroma-reduction><abbr title="minimum delta E">MINDE</abbr> Chroma Reduction<a class=headerlink href=#minde-chroma-reduction title="Permanent link"></a></h3> <p><abbr title="minimum delta E">MINDE</abbr> chroma reduction is an approach that reduces the chroma in a perceptual color space until the color is within gamut of a targeted color space. As the exact point at which the color will be in gamut is unknown, the chroma is reduced using bisection. The color is compared periodically to the the clipped version of the current iteration to see if the E distance between them is below the "just noticeable difference" (<abbr title="just noticeable difference">JND</abbr>) defined for the color space. If the color is close enough to the clipped version, the clipped version is returned.</p> <p>This method is good because it does a fairly accurate job at approach the gamut surface. It is not prone to over correcting, and clipping before you reach the surface helps soften gamut mapping to reduce hard edges in interpolation. This approach also keeps lightness and hue fairly constant. If the <abbr title="just noticeable difference">JND</abbr> is reduced, the lightness and hue will be held even more constant and will often approach the gamut surface even closer.</p> <p>Computationally, <abbr title="minimum delta E">MINDE</abbr> Chroma Reduction is slower to compute than clipping due to how many iterations it must perform to get close enough to the gamut surface, but it generally provides good results, far surpassing naive clipping.</p> <p>It should be noted that most color spaces that have a defined gamut are tied to specific RGB gamuts. And when they are gamut mapped, they are done so in those RGB spaces. For instance HSL, which represents the sRGB gamut in a cylindrical form will be gamut mapped in sRGB (though simple clipping may be done directly in HSL).</p> <p>There are a few color spaces/models that do not have a clearly defined gamut. One such case is HPLuv, which is only defined as a cylindrical color space that represent only a subset of the sRGB color space. Additionally Okhsl and Okhsv are two cylindrical color spaces based on the perceptual Oklab color space that are meant to target the sRGB gamut, but are only a loose approximation which actually can slightly clip the sRGB gamut while simultaneously containing a few colors that exceed the sRGB gamut. ColorAide will not automatically associate these color spaces with an RGB gamut. In the case of HPLuv, there is no specifically defined RGB gamut, and in the case of Okhsl and Okhsv, sRGB is the closest, but does not precisely represent the colors in Okhsl and Okhsv.</p> <p>Gamut mapping in HPLuv usually provides fine results, but you may find that gamut mapping Okhsl may not provide the intended results. When gamut mapping such spaces, you may want to use the closest RGB gamut.</p> <div class=playground id=__playground_13> <div class=playground-results id=__playground-results_13> <div class=color-command><div class=swatch-bar><span class="swatch swatch-gradient"><span class=swatch-color style="--swatch-stops: rgb(240.6 214.01 220.99) 0%,rgb(240.6 214.01 220.99) 1.0%,rgb(242.74 213.27 219.41) 1.0%,rgb(242.74 213.27 219.41) 2.0%,rgb(243.47 213.16 217.83) 2.0%,rgb(243.47 213.16 217.83) 3.0%,rgb(243.21 213.49 216.47) 3.0%,rgb(243.21 213.49 216.47) 4.0%,rgb(241.94 214.21 215.5) 4.0%,rgb(241.94 214.21 215.5) 5.0%,rgb(239.29 215.44 215.26) 5.0%,rgb(239.29 215.44 215.26) 6.0%,rgb(233.96 217.58 216.56) 6.0%,rgb(233.96 217.58 216.56) 7.0%,rgb(220.94 222.08 222.21) 7.0%,rgb(220.94 222.08 222.21) 8.0%,rgb(148.89 238.74 253.63) 8.0%,rgb(148.89 238.74 253.63) 9.0%,rgb(223.48 221.29 220.79) 9.0%,rgb(223.48 221.29 220.79) 10.0%,rgb(234.56 217.82 213.07) 10.0%,rgb(234.56 217.82 213.07) 11.0%,rgb(238.82 216.54 208.87) 11.0%,rgb(238.82 216.54 208.87) 12.0%,rgb(241.05 215.98 205.71) 12.0%,rgb(241.05 215.98 205.71) 13.0%,rgb(242.43 215.73 202.93) 13.0%,rgb(242.43 215.73 202.93) 14.0%,rgb(243.38 215.64 200.27) 14.0%,rgb(243.38 215.64 200.27) 15.0%,rgb(244.1 215.67 197.57) 15.0%,rgb(244.1 215.67 197.57) 16.0%,rgb(244.65 215.77 194.78) 16.0%,rgb(244.65 215.77 194.78) 17.0%,rgb(245.07 215.94 191.83) 17.0%,rgb(245.07 215.94 191.83) 18.0%,rgb(245.34 216.2 188.74) 18.0%,rgb(245.34 216.2 188.74) 19.0%,rgb(245.4 216.54 185.55) 19.0%,rgb(245.4 216.54 185.55) 20.0%,rgb(245.18 217.01 182.41) 20.0%,rgb(245.18 217.01 182.41) 21.0%,rgb(244.52 217.62 179.64) 21.0%,rgb(244.52 217.62 179.64) 22.0%,rgb(243.16 218.42 177.92) 22.0%,rgb(243.16 218.42 177.92) 23.0%,rgb(240.62 219.45 178.8) 23.0%,rgb(240.62 219.45 178.8) 24.0%,rgb(235.75 220.72 186.19) 24.0%,rgb(235.75 220.72 186.19) 25.0%,rgb(224.82 221.82 213.18) 25.0%,rgb(224.82 221.82 213.18) 26.0%,rgb(255 219.98 83.467) 26.0%,rgb(255 219.98 83.467) 27.0%,rgb(254.9 221.7 0) 27.0%,rgb(254.9 221.7 0) 28.0%,rgb(248.07 224.78 0) 28.0%,rgb(248.07 224.78 0) 29.0%,rgb(240.85 227.87 0) 29.0%,rgb(240.85 227.87 0) 30.0%,rgb(221.14 220.2 234.27) 30.0%,rgb(221.14 220.2 234.27) 31.0%,rgb(222.13 218.61 241.77) 31.0%,rgb(222.13 218.61 241.77) 32.0%,rgb(222.91 219.42 234.8) 32.0%,rgb(222.91 219.42 234.8) 33.0%,rgb(225.25 217.15 242.94) 33.0%,rgb(225.25 217.15 242.94) 34.0%,rgb(193.14 244.5 0.00004) 34.0%,rgb(193.14 244.5 0.00004) 35.0%,rgb(179.14 248.31 0.00001) 35.0%,rgb(179.14 248.31 0.00001) 36.0%,rgb(162.05 252.38 0) 36.0%,rgb(162.05 252.38 0) 37.0%,rgb(146.67 255 52.96) 37.0%,rgb(146.67 255 52.96) 38.0%,rgb(139.83 255 95.973) 38.0%,rgb(139.83 255 95.973) 39.0%,rgb(133.37 255 120.39) 39.0%,rgb(133.37 255 120.39) 40.0%,rgb(127.14 255 138.13) 40.0%,rgb(127.14 255 138.13) 41.0%,rgb(234.11 215.17 232.15) 41.0%,rgb(234.11 215.17 232.15) 42.0%,rgb(219.39 222.96 220.19) 42.0%,rgb(219.39 222.96 220.19) 43.0%,rgb(211.88 226.25 216.52) 43.0%,rgb(211.88 226.25 216.52) 44.0%,rgb(208.96 227.3 216.46) 44.0%,rgb(208.96 227.3 216.46) 45.0%,rgb(210.07 226.69 218.09) 45.0%,rgb(210.07 226.69 218.09) 46.0%,rgb(215.84 224.27 220.44) 46.0%,rgb(215.84 224.27 220.44) 47.0%,rgb(228.44 219 222.79) 47.0%,rgb(228.44 219 222.79) 48.0%,rgb(253.98 207.12 224.12) 48.0%,rgb(253.98 207.12 224.12) 49.0%,rgb(58.892 255 222.35) 49.0%,rgb(58.892 255 222.35) 50.0%,rgb(43.575 255 229.39) 50.0%,rgb(43.575 255 229.39) 51.0%,rgb(15.798 255 236.45) 51.0%,rgb(15.798 255 236.45) 52.0%,rgb(0 254.35 243.14) 52.0%,rgb(0 254.35 243.14) 53.0%,rgb(0 253.49 249.5) 53.0%,rgb(0 253.49 249.5) 54.0%,rgb(31.821 252.05 255) 54.0%,rgb(31.821 252.05 255) 55.0%,rgb(96.697 247.2 255) 55.0%,rgb(96.697 247.2 255) 56.0%,rgb(122.5 243.53 255) 56.0%,rgb(122.5 243.53 255) 57.0%,rgb(233.06 218.06 215.92) 57.0%,rgb(233.06 218.06 215.92) 58.0%,rgb(201.33 227.61 232.81) 58.0%,rgb(201.33 227.61 232.81) 59.0%,rgb(192.41 229.59 238.88) 59.0%,rgb(192.41 229.59 238.88) 60.0%,rgb(190.31 229.79 241.81) 60.0%,rgb(190.31 229.79 241.81) 61.0%,rgb(190.93 229.37 243.31) 61.0%,rgb(190.93 229.37 243.31) 62.0%,rgb(192.74 228.7 243.99) 62.0%,rgb(192.74 228.7 243.99) 63.0%,rgb(195.07 227.94 244.15) 63.0%,rgb(195.07 227.94 244.15) 64.0%,rgb(197.59 227.15 243.93) 64.0%,rgb(197.59 227.15 243.93) 65.0%,rgb(200.15 226.38 243.44) 65.0%,rgb(200.15 226.38 243.44) 66.0%,rgb(202.66 225.65 242.72) 66.0%,rgb(202.66 225.65 242.72) 67.0%,rgb(205.12 224.95 241.76) 67.0%,rgb(205.12 224.95 241.76) 68.0%,rgb(207.53 224.3 240.53) 68.0%,rgb(207.53 224.3 240.53) 69.0%,rgb(210 223.68 238.86) 69.0%,rgb(210 223.68 238.86) 70.0%,rgb(212.78 223.07 236.25) 70.0%,rgb(212.78 223.07 236.25) 71.0%,rgb(216.71 222.42 230.93) 71.0%,rgb(216.71 222.42 230.93) 72.0%,rgb(228.32 221.06 208.34) 72.0%,rgb(228.32 221.06 208.34) 73.0%,rgb(206.78 222.18 255) 73.0%,rgb(206.78 222.18 255) 74.0%,rgb(208.82 221.45 255) 74.0%,rgb(208.82 221.45 255) 75.0%,rgb(241.02 221.32 158.5) 75.0%,rgb(241.02 221.32 158.5) 76.0%,rgb(221.74 221.79 222.05) 76.0%,rgb(221.74 221.79 222.05) 77.0%,rgb(219.19 220.95 234.32) 77.0%,rgb(219.19 220.95 234.32) 78.0%,rgb(219.21 220.15 239.36) 78.0%,rgb(219.21 220.15 239.36) 79.0%,rgb(220.12 219.39 241.85) 79.0%,rgb(220.12 219.39 241.85) 80.0%,rgb(221.43 218.69 242.99) 80.0%,rgb(221.43 218.69 242.99) 81.0%,rgb(222.9 218.08 243.11) 81.0%,rgb(222.9 218.08 243.11) 82.0%,rgb(224.34 217.66 242.15) 82.0%,rgb(224.34 217.66 242.15) 83.0%,rgb(225.4 217.64 239.59) 83.0%,rgb(225.4 217.64 239.59) 84.0%,rgb(225.14 218.72 233.5) 84.0%,rgb(225.14 218.72 233.5) 85.0%,rgb(218.36 224.4 212.56) 85.0%,rgb(218.36 224.4 212.56) 86.0%,rgb(237.86 209.55 255) 86.0%,rgb(237.86 209.55 255) 87.0%,rgb(241.62 207.8 255) 87.0%,rgb(241.62 207.8 255) 88.0%,rgb(245.88 205.74 255) 88.0%,rgb(245.88 205.74 255) 89.0%,rgb(250.81 203.27 255) 89.0%,rgb(250.81 203.27 255) 90.0%,rgb(255 201.41 253.37) 90.0%,rgb(255 201.41 253.37) 91.0%,rgb(255 202.48 247.79) 91.0%,rgb(255 202.48 247.79) 92.0%,rgb(255 203.37 242.98) 92.0%,rgb(255 203.37 242.98) 93.0%,rgb(255 204.13 238.75) 93.0%,rgb(255 204.13 238.75) 94.0%,rgb(255 204.79 234.98) 94.0%,rgb(255 204.79 234.98) 95.0%,rgb(255 205.37 231.57) 95.0%,rgb(255 205.37 231.57) 96.0%,rgb(207.78 227.34 219.25) 96.0%,rgb(207.78 227.34 219.25) 97.0%,rgb(219.86 222.58 221.6) 97.0%,rgb(219.86 222.58 221.6) 98.0%,rgb(235.56 216.06 222.23) 98.0%,rgb(235.56 216.06 222.23) 99.0%,rgb(240.6 214.01 220.99) 99.0%,rgb(240.6 214.01 220.99) 100.0%"></span></span></div><div class=swatch-bar><span class="swatch swatch-gradient"><span class=swatch-color style="--swatch-stops: rgb(255 200.22 219.68) 0%,rgb(255 200.22 219.68) 1.0%,rgb(255 200.78 216.19) 1.0%,rgb(255 200.78 216.19) 2.0%,rgb(255 201.32 212.83) 2.0%,rgb(255 201.32 212.83) 3.0%,rgb(255 201.81 209.56) 3.0%,rgb(255 201.81 209.56) 4.0%,rgb(255 202.29 206.37) 4.0%,rgb(255 202.29 206.37) 5.0%,rgb(255 202.73 203.19) 5.0%,rgb(255 202.73 203.19) 6.0%,rgb(255 203.19 200.05) 6.0%,rgb(255 203.19 200.05) 7.0%,rgb(255 203.61 196.86) 7.0%,rgb(255 203.61 196.86) 8.0%,rgb(255 204.06 193.67) 8.0%,rgb(255 204.06 193.67) 9.0%,rgb(255 204.48 190.38) 9.0%,rgb(255 204.48 190.38) 10.0%,rgb(255 204.93 187.04) 10.0%,rgb(255 204.93 187.04) 11.0%,rgb(255 205.38 183.55) 11.0%,rgb(255 205.38 183.55) 12.0%,rgb(255 205.82 179.87) 12.0%,rgb(255 205.82 179.87) 13.0%,rgb(255 206.28 175.98) 13.0%,rgb(255 206.28 175.98) 14.0%,rgb(255 206.74 171.78) 14.0%,rgb(255 206.74 171.78) 15.0%,rgb(255 207.25 167.32) 15.0%,rgb(255 207.25 167.32) 16.0%,rgb(255 207.77 162.36) 16.0%,rgb(255 207.77 162.36) 17.0%,rgb(255 208.32 156.85) 17.0%,rgb(255 208.32 156.85) 18.0%,rgb(255 208.91 150.67) 18.0%,rgb(255 208.91 150.67) 19.0%,rgb(255 209.56 143.57) 19.0%,rgb(255 209.56 143.57) 20.0%,rgb(255 210.27 135.19) 20.0%,rgb(255 210.27 135.19) 21.0%,rgb(255 211.06 125.13) 21.0%,rgb(255 211.06 125.13) 22.0%,rgb(255 211.92 112.29) 22.0%,rgb(255 211.92 112.29) 23.0%,rgb(255 212.91 95.177) 23.0%,rgb(255 212.91 95.177) 24.0%,rgb(255 214.03 68.847) 24.0%,rgb(255 214.03 68.847) 25.0%,rgb(255 215.25 0) 25.0%,rgb(255 215.25 0) 26.0%,rgb(255 217.73 0) 26.0%,rgb(255 217.73 0) 27.0%,rgb(255 221 0) 27.0%,rgb(255 221 0) 28.0%,rgb(250.98 224.44 0) 28.0%,rgb(250.98 224.44 0) 29.0%,rgb(243.09 227.87 0) 29.0%,rgb(243.09 227.87 0) 30.0%,rgb(234.63 231.32 0) 30.0%,rgb(234.63 231.32 0) 31.0%,rgb(225.4 234.84 0) 31.0%,rgb(225.4 234.84 0) 32.0%,rgb(215.2 238.45 0) 32.0%,rgb(215.2 238.45 0) 33.0%,rgb(203.7 242.2 0) 33.0%,rgb(203.7 242.2 0) 34.0%,rgb(190.43 246.12 0) 34.0%,rgb(190.43 246.12 0) 35.0%,rgb(174.66 250.27 0) 35.0%,rgb(174.66 250.27 0) 36.0%,rgb(155.08 254.69 0) 36.0%,rgb(155.08 254.69 0) 37.0%,rgb(131.8 255 0) 37.0%,rgb(131.8 255 0) 38.0%,rgb(105.52 255 0) 38.0%,rgb(105.52 255 0) 39.0%,rgb(93.012 255 76.07) 39.0%,rgb(93.012 255 76.07) 40.0%,rgb(81.492 255 108.22) 40.0%,rgb(81.492 255 108.22) 41.0%,rgb(68.994 255 130.11) 41.0%,rgb(68.994 255 130.11) 42.0%,rgb(53.715 255 147.08) 42.0%,rgb(53.715 255 147.08) 43.0%,rgb(31.8 255 161.23) 43.0%,rgb(31.8 255 161.23) 44.0%,rgb(0 255 173.37) 44.0%,rgb(0 255 173.37) 45.0%,rgb(0 255 184.55) 45.0%,rgb(0 255 184.55) 46.0%,rgb(0 255 195.03) 46.0%,rgb(0 255 195.03) 47.0%,rgb(0 255 204.77) 47.0%,rgb(0 255 204.77) 48.0%,rgb(0 255 213.87) 48.0%,rgb(0 255 213.87) 49.0%,rgb(0 255 222.45) 49.0%,rgb(0 255 222.45) 50.0%,rgb(0 255 230.57) 50.0%,rgb(0 255 230.57) 51.0%,rgb(0 255 238.34) 51.0%,rgb(0 255 238.34) 52.0%,rgb(0 255 245.79) 52.0%,rgb(0 255 245.79) 53.0%,rgb(0 255 252.99) 53.0%,rgb(0 255 252.99) 54.0%,rgb(0 255 255) 54.0%,rgb(0 255 255) 55.0%,rgb(0 254.22 255) 55.0%,rgb(0 254.22 255) 56.0%,rgb(0 251.48 255) 56.0%,rgb(0 251.48 255) 57.0%,rgb(73.055 247.5 255) 57.0%,rgb(73.055 247.5 255) 58.0%,rgb(102.28 244.33 255) 58.0%,rgb(102.28 244.33 255) 59.0%,rgb(120.37 241.66 255) 59.0%,rgb(120.37 241.66 255) 60.0%,rgb(133.61 239.35 255) 60.0%,rgb(133.61 239.35 255) 61.0%,rgb(143.74 237.34 255) 61.0%,rgb(143.74 237.34 255) 62.0%,rgb(152.04 235.54 255) 62.0%,rgb(152.04 235.54 255) 63.0%,rgb(159.04 233.91 255) 63.0%,rgb(159.04 233.91 255) 64.0%,rgb(165.08 232.42 255) 64.0%,rgb(165.08 232.42 255) 65.0%,rgb(170.39 231.04 255) 65.0%,rgb(170.39 231.04 255) 66.0%,rgb(175.12 229.75 255) 66.0%,rgb(175.12 229.75 255) 67.0%,rgb(179.43 228.53 255) 67.0%,rgb(179.43 228.53 255) 68.0%,rgb(183.41 227.37 255) 68.0%,rgb(183.41 227.37 255) 69.0%,rgb(187.05 226.25 255) 69.0%,rgb(187.05 226.25 255) 70.0%,rgb(190.57 225.16 255) 70.0%,rgb(190.57 225.16 255) 71.0%,rgb(193.87 224.1 255) 71.0%,rgb(193.87 224.1 255) 72.0%,rgb(197.05 223.04 255) 72.0%,rgb(197.05 223.04 255) 73.0%,rgb(200.14 222 255) 73.0%,rgb(200.14 222 255) 74.0%,rgb(203.15 220.95 255) 74.0%,rgb(203.15 220.95 255) 75.0%,rgb(206.12 219.88 255) 75.0%,rgb(206.12 219.88 255) 76.0%,rgb(209.1 218.8 255) 76.0%,rgb(209.1 218.8 255) 77.0%,rgb(212.08 217.68 255) 77.0%,rgb(212.08 217.68 255) 78.0%,rgb(215.1 216.52 255) 78.0%,rgb(215.1 216.52 255) 79.0%,rgb(218.18 215.31 255) 79.0%,rgb(218.18 215.31 255) 80.0%,rgb(221.36 214.02 255) 80.0%,rgb(221.36 214.02 255) 81.0%,rgb(224.67 212.65 255) 81.0%,rgb(224.67 212.65 255) 82.0%,rgb(228.14 211.17 255) 82.0%,rgb(228.14 211.17 255) 83.0%,rgb(231.82 209.55 255) 83.0%,rgb(231.82 209.55 255) 84.0%,rgb(235.77 207.76 255) 84.0%,rgb(235.77 207.76 255) 85.0%,rgb(240.03 205.77 255) 85.0%,rgb(240.03 205.77 255) 86.0%,rgb(244.74 203.48 255) 86.0%,rgb(244.74 203.48 255) 87.0%,rgb(249.97 200.83 255) 87.0%,rgb(249.97 200.83 255) 88.0%,rgb(255 197.73 255) 88.0%,rgb(255 197.73 255) 89.0%,rgb(255 195.18 255) 89.0%,rgb(255 195.18 255) 90.0%,rgb(255 193.66 255) 90.0%,rgb(255 193.66 255) 91.0%,rgb(255 193.37 255) 91.0%,rgb(255 193.37 255) 92.0%,rgb(255 194.42 251.87) 92.0%,rgb(255 194.42 251.87) 93.0%,rgb(255 195.59 245.92) 93.0%,rgb(255 195.59 245.92) 94.0%,rgb(255 196.59 240.59) 94.0%,rgb(255 196.59 240.59) 95.0%,rgb(255 197.5 235.74) 95.0%,rgb(255 197.5 235.74) 96.0%,rgb(255 198.28 231.3) 96.0%,rgb(255 198.28 231.3) 97.0%,rgb(255 199 227.19) 97.0%,rgb(255 199 227.19) 98.0%,rgb(255 199.62 223.33) 98.0%,rgb(255 199.62 223.33) 99.0%,rgb(255 200.22 219.68) 99.0%,rgb(255 200.22 219.68) 100.0%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Steps</span><span class=p>([</span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;okhsl&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-chroma&#39;</span><span class=p>)</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>Color</span><span class=o>.</span><span class=n>steps</span><span class=p>([</span><span class=s1>&#39;oklch(90% 0.4 0)&#39;</span><span class=p>,</span> <span class=s1>&#39;oklch(90% 0.4 360)&#39;</span><span class=p>],</span> <span class=n>steps</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>space</span><span class=o>=</span><span class=s1>&#39;oklch&#39;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s1>&#39;longer&#39;</span><span class=p>)])</span>
<span class=go>[color(--oklch 0.9 0.03085 0 / 1), color(--oklch 0.9 0.03372 3.6364 / 1), color(--oklch 0.9 0.03428 7.2727 / 1), color(--oklch 0.9 0.03333 10.909 / 1), color(--oklch 0.9 0.03093 14.545 / 1), color(--oklch 0.9 0.02652 18.182 / 1), color(--oklch 0.9 0.01818 21.818 / 1), color(--oklch 0.9 0.00125 205.45 / 1), color(--oklch 0.9 0.08837 209.09 / 1), color(--oklch 0.9 0.00249 32.727 / 1), color(--oklch 0.9 0.01967 36.364 / 1), color(--oklch 0.9 0.02693 40 / 1), color(--oklch 0.9 0.03129 43.636 / 1), color(--oklch 0.9 0.03452 47.273 / 1), color(--oklch 0.9 0.03733 50.909 / 1), color(--oklch 0.9 0.04004 54.545 / 1), color(--oklch 0.9 0.04282 58.182 / 1), color(--oklch 0.9 0.04576 61.818 / 1), color(--oklch 0.9 0.04888 65.455 / 1), color(--oklch 0.9 0.05211 69.091 / 1), color(--oklch 0.9 0.05531 72.727 / 1), color(--oklch 0.9 0.0581 76.364 / 1), color(--oklch 0.9 0.05966 80 / 1), color(--oklch 0.9 0.05812 83.636 / 1), color(--oklch 0.9 0.04843 87.273 / 1), color(--oklch 0.9 0.01209 90.909 / 1), color(--oklch 0.9 0.15515 94.545 / 1), color(--oklch 0.9 0.1861 98.182 / 1), color(--oklch 0.9 0.18832 101.82 / 1), color(--oklch 0.9 0.19138 105.45 / 1), color(--oklch 0.9 0.01909 289.09 / 1), color(--oklch 0.9 0.03162 292.73 / 1), color(--oklch 0.9 0.02113 296.36 / 1), color(--oklch 0.9 0.03591 300 / 1), color(--oklch 0.9 0.22247 123.64 / 1), color(--oklch 0.9 0.23299 127.27 / 1), color(--oklch 0.9 0.2456 130.91 / 1), color(--oklch 0.9 0.24384 134.55 / 1), color(--oklch 0.9 0.22238 138.18 / 1), color(--oklch 0.9 0.20619 141.82 / 1), color(--oklch 0.9 0.19362 145.45 / 1), color(--oklch 0.9 0.03067 329.09 / 1), color(--oklch 0.9 0.00536 152.73 / 1), color(--oklch 0.9 0.0202 156.36 / 1), color(--oklch 0.9 0.02441 160 / 1), color(--oklch 0.9 0.02118 163.64 / 1), color(--oklch 0.9 0.01041 167.27 / 1), color(--oklch 0.9 0.01147 350.91 / 1), color(--oklch 0.9 0.05689 354.55 / 1), color(--oklch 0.9 0.15497 178.18 / 1), color(--oklch 0.9 0.1556 181.82 / 1), color(--oklch 0.9 0.15708 185.45 / 1), color(--oklch 0.9 0.15589 189.09 / 1), color(--oklch 0.9 0.15425 192.73 / 1), color(--oklch 0.9 0.15008 196.36 / 1), color(--oklch 0.9 0.12658 200 / 1), color(--oklch 0.9 0.10983 203.64 / 1), color(--oklch 0.9 0.01686 27.273 / 1), color(--oklch 0.9 0.0287 210.91 / 1), color(--oklch 0.9 0.04084 214.55 / 1), color(--oklch 0.9 0.04427 218.18 / 1), color(--oklch 0.9 0.04441 221.82 / 1), color(--oklch 0.9 0.0431 225.45 / 1), color(--oklch 0.9 0.04112 229.09 / 1), color(--oklch 0.9 0.03883 232.73 / 1), color(--oklch 0.9 0.03641 236.36 / 1), color(--oklch 0.9 0.03393 240 / 1), color(--oklch 0.9 0.03138 243.64 / 1), color(--oklch 0.9 0.02866 247.27 / 1), color(--oklch 0.9 0.02552 250.91 / 1), color(--oklch 0.9 0.0212 254.55 / 1), color(--oklch 0.9 0.01317 258.18 / 1), color(--oklch 0.9 0.01887 81.818 / 1), color(--oklch 0.9 0.04813 265.45 / 1), color(--oklch 0.9 0.04811 269.09 / 1), color(--oklch 0.9 0.0831 92.727 / 1), color(--oklch 0.9 0.00036 276.36 / 1), color(--oklch 0.9 0.01827 280 / 1), color(--oklch 0.9 0.02615 283.64 / 1), color(--oklch 0.9 0.03053 287.27 / 1), color(--oklch 0.9 0.0331 290.91 / 1), color(--oklch 0.9 0.03429 294.55 / 1), color(--oklch 0.9 0.03388 298.18 / 1), color(--oklch 0.9 0.03076 301.82 / 1), color(--oklch 0.9 0.02106 305.45 / 1), color(--oklch 0.9 0.01717 129.09 / 1), color(--oklch 0.9 0.06811 312.73 / 1), color(--oklch 0.9 0.07289 316.36 / 1), color(--oklch 0.9 0.07874 320 / 1), color(--oklch 0.9 0.08599 323.64 / 1), color(--oklch 0.9 0.09033 327.27 / 1), color(--oklch 0.9 0.08316 330.91 / 1), color(--oklch 0.9 0.07729 334.55 / 1), color(--oklch 0.9 0.07245 338.18 / 1), color(--oklch 0.9 0.06842 341.82 / 1), color(--oklch 0.9 0.06506 345.45 / 1), color(--oklch 0.9 0.0235 169.09 / 1), color(--oklch 0.9 0.00322 172.73 / 1), color(--oklch 0.9 0.02296 356.36 / 1), color(--oklch 0.9 0.03085 0 / 1)]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Steps</span><span class=p>([</span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-chroma&#39;</span><span class=p>)</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>Color</span><span class=o>.</span><span class=n>steps</span><span class=p>([</span><span class=s1>&#39;oklch(90% 0.4 0)&#39;</span><span class=p>,</span> <span class=s1>&#39;oklch(90% 0.4 360)&#39;</span><span class=p>],</span> <span class=n>steps</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>space</span><span class=o>=</span><span class=s1>&#39;oklch&#39;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s1>&#39;longer&#39;</span><span class=p>)])</span>
<span class=go>[color(--oklch 0.88717 0.06673 355.33 / 1), color(--oklch 0.88718 0.06441 359.67 / 1), color(--oklch 0.88719 0.06255 4.0928 / 1), color(--oklch 0.88718 0.06113 8.5912 / 1), color(--oklch 0.88719 0.06011 13.152 / 1), color(--oklch 0.88715 0.05951 17.75 / 1), color(--oklch 0.88717 0.05925 22.369 / 1), color(--oklch 0.88713 0.05941 26.987 / 1), color(--oklch 0.88715 0.05991 31.574 / 1), color(--oklch 0.88713 0.06083 36.121 / 1), color(--oklch 0.88716 0.0621 40.588 / 1), color(--oklch 0.88717 0.06379 44.978 / 1), color(--oklch 0.88716 0.06593 49.278 / 1), color(--oklch 0.88715 0.06854 53.473 / 1), color(--oklch 0.88712 0.07167 57.565 / 1), color(--oklch 0.88715 0.07531 61.519 / 1), color(--oklch 0.88713 0.07964 65.378 / 1), color(--oklch 0.88712 0.08471 69.122 / 1), color(--oklch 0.88712 0.09063 72.748 / 1), color(--oklch 0.88713 0.09758 76.267 / 1), color(--oklch 0.88713 0.10584 79.694 / 1), color(--oklch 0.88717 0.11564 83.019 / 1), color(--oklch 0.88715 0.12763 86.283 / 1), color(--oklch 0.88719 0.14226 89.462 / 1), color(--oklch 0.88719 0.16071 92.59 / 1), color(--oklch 0.88726 0.18232 95.438 / 1), color(--oklch 0.89218 0.18372 96.494 / 1), color(--oklch 0.8987 0.18567 97.858 / 1), color(--oklch 0.90192 0.18793 100.67 / 1), color(--oklch 0.90192 0.19107 104.69 / 1), color(--oklch 0.90193 0.19529 108.7 / 1), color(--oklch 0.90192 0.20068 112.7 / 1), color(--oklch 0.90192 0.20737 116.68 / 1), color(--oklch 0.90193 0.21554 120.62 / 1), color(--oklch 0.90194 0.22539 124.54 / 1), color(--oklch 0.90194 0.23722 128.42 / 1), color(--oklch 0.90194 0.25142 132.26 / 1), color(--oklch 0.89219 0.26266 135.44 / 1), color(--oklch 0.88263 0.27371 138.18 / 1), color(--oklch 0.88175 0.25494 141.76 / 1), color(--oklch 0.88189 0.23689 145.66 / 1), color(--oklch 0.88209 0.22286 149.58 / 1), color(--oklch 0.88221 0.21214 153.5 / 1), color(--oklch 0.88229 0.20391 157.42 / 1), color(--oklch 0.88313 0.19644 161.07 / 1), color(--oklch 0.88558 0.18764 164.42 / 1), color(--oklch 0.88805 0.17994 167.95 / 1), color(--oklch 0.8905 0.17342 171.57 / 1), color(--oklch 0.89291 0.168 175.25 / 1), color(--oklch 0.8953 0.1636 178.96 / 1), color(--oklch 0.89767 0.16015 182.69 / 1), color(--oklch 0.90003 0.15756 186.42 / 1), color(--oklch 0.90238 0.15577 190.11 / 1), color(--oklch 0.90473 0.15472 193.75 / 1), color(--oklch 0.9054 0.15455 194.77 / 1), color(--oklch 0.90357 0.15414 195.17 / 1), color(--oklch 0.89711 0.15276 196.59 / 1), color(--oklch 0.89505 0.13708 199.31 / 1), color(--oklch 0.89504 0.12221 202.11 / 1), color(--oklch 0.89502 0.11028 204.96 / 1), color(--oklch 0.89502 0.10034 207.93 / 1), color(--oklch 0.895 0.09216 210.95 / 1), color(--oklch 0.89499 0.08517 214.1 / 1), color(--oklch 0.89499 0.07918 217.37 / 1), color(--oklch 0.89499 0.07401 220.78 / 1), color(--oklch 0.89499 0.06955 224.33 / 1), color(--oklch 0.89499 0.06569 228.03 / 1), color(--oklch 0.89498 0.06237 231.88 / 1), color(--oklch 0.89499 0.05949 235.92 / 1), color(--oklch 0.89497 0.05709 240.08 / 1), color(--oklch 0.89498 0.05504 244.48 / 1), color(--oklch 0.89498 0.05341 249.01 / 1), color(--oklch 0.89497 0.05215 253.7 / 1), color(--oklch 0.89497 0.05126 258.51 / 1), color(--oklch 0.89496 0.05075 263.44 / 1), color(--oklch 0.89495 0.05063 268.45 / 1), color(--oklch 0.89496 0.05088 273.51 / 1), color(--oklch 0.89495 0.05156 278.57 / 1), color(--oklch 0.89494 0.05266 283.61 / 1), color(--oklch 0.89494 0.0542 288.57 / 1), color(--oklch 0.89494 0.05623 293.44 / 1), color(--oklch 0.89493 0.0588 298.19 / 1), color(--oklch 0.89493 0.06192 302.78 / 1), color(--oklch 0.89492 0.0657 307.21 / 1), color(--oklch 0.89491 0.07022 311.49 / 1), color(--oklch 0.89492 0.07558 315.56 / 1), color(--oklch 0.8949 0.08201 319.49 / 1), color(--oklch 0.8949 0.0897 323.25 / 1), color(--oklch 0.89413 0.09833 326.36 / 1), color(--oklch 0.88972 0.10274 326.4 / 1), color(--oklch 0.88709 0.10539 326.42 / 1), color(--oklch 0.8866 0.10588 326.42 / 1), color(--oklch 0.8873 0.10102 328.09 / 1), color(--oklch 0.88727 0.09341 331.65 / 1), color(--oklch 0.88723 0.087 335.3 / 1), color(--oklch 0.88726 0.08147 339.1 / 1), color(--oklch 0.88723 0.07682 342.98 / 1), color(--oklch 0.88724 0.07284 347 / 1), color(--oklch 0.88718 0.06954 351.1 / 1), color(--oklch 0.88717 0.06673 355.33 / 1)]</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_13 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_13 spellcheck=false>Steps([c.fit('okhsl', method='oklch-chroma') for c in Color.steps(['oklch(90% 0.4 0)', 'oklch(90% 0.4 360)'], steps=100, space='oklch', hue='longer')])
Steps([c.fit('srgb', method='oklch-chroma') for c in Color.steps(['oklch(90% 0.4 0)', 'oklch(90% 0.4 360)'], steps=100, space='oklch', hue='longer')])</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_13 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_13 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_13 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_13 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>Lastly, all <abbr title="minimum delta E">MINDE</abbr> Chroma Reduction methods allow the setting of the <abbr title="just noticeable difference">JND</abbr>. The default is usually specific to the perceptual space being used, but it should be noted that while a lower <abbr title="just noticeable difference">JND</abbr> will give you a theoretically better value, some color spaces have quirks due to their unique geometric shape. Consider the color <span><span class="swatch out-of-gamut" title="color(display-p3 1 1 0)"><span class=swatch-color style="--swatch-stops: #fffd00,#fffd00;"></span></span><code class=highlight><span class=nf>color</span><span class=g>(</span><span class=kc>display-p3</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=m>0</span><span class=g>)</span></code></span>. If we were to gamut map it in LCh with a very low <abbr title="just noticeable difference">JND</abbr>, we can see that the odd shape of LCh can cause us to get a very desaturated color. By using the default <abbr title="just noticeable difference">JND</abbr> of 2 for LCh, the fuzziness of the <abbr title="minimum delta E">MINDE</abbr> will catch the more saturated yellow. This isn't a problem in OkLCh, but it has its own quirks as well.</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1><abbr title="just noticeable difference">JND</abbr> 0</label><label for=__tabbed_1_2><abbr title="just noticeable difference">JND</abbr> 2</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><img alt="Traces 3X" src=../images/jnd-0.png></p> </div> <div class=tabbed-block> <p><img alt="Traces 1X" src=../images/jnd-2.png></p> </div> </div> </div> <h4 id=lch-chroma>LCh Chroma<a class=headerlink href=#lch-chroma title="Permanent link"></a></h4> <div class="admonition success"> <p class=admonition-title>The <code>lch-chroma</code> gamut mapping is registered in <code>Color</code> by default</p> </div> <p>LCh Chroma applies <abbr title="minimum delta E">MINDE</abbr> Chroma Reduction within the CIELCh color space. This is the default in ColorAide.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>As most colors in ColorAide use a D65 white point by default, LCh D65 is used as the gamut mapping color space.</p> </div> <p>CIELCh, is not necessarily the best perceptual color space available, but it is a generally well understood color space that has been available a long time. It does suffer from a purple shift when dealing with blue colors, but can generally handle colors in very wide gamuts reasonably due to its fairly consistent shape well past the spectral locus.</p> <p>CSS originally proposed <abbr title="minimum delta E">MINDE</abbr> Chroma Reduction with CIELCh, but has later changed to OkLCh. It is possible that the entire choice in algorithms could change as well in the future. We do offer an <a href=#oklch-chroma>OkLCh variant</a>, but we currently still use CIELCh due to its consistency even with colors far outside the gamut. If you are working within reasonable gamuts, OkLCh may be a better choice.</p> <p>LCh Chroma is the default gamut mapping algorithm unless otherwise changed, and can be performed by simply calling <code>fit()</code> or by calling <code>fit(method='lch-chroma')</code>.</p> <div class=playground id=__playground_14> <div class=playground-results id=__playground-results_14> <div class=color-command><div class=swatch-bar><span class=swatch title="rgb(255 101.13 98.204)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 101.13 98.204) 50%, rgb(255 101.13 98.204) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>c</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;lch-chroma&#39;</span><span class=p>)</span>
<span class=go>color(srgb 1 0.39658 0.38511 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_14 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_14 spellcheck=false>c = Color('srgb', [2, -1, 0])
c.fit(method='lch-chroma')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_14 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_14 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_14 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_14 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>Additionally, the <abbr title="just noticeable difference">JND</abbr> target can be controlled for tighter or looser gamut mapping via the <code>jnd</code> option. The default is <code>2</code>.</p> <div class=playground id=__playground_15> <div class=playground-results id=__playground-results_15> <div class=color-command><div class=swatch-bar><span class=swatch title="rgb(255 110.72 105.02)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 110.72 105.02) 50%, rgb(255 110.72 105.02) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>c</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;lch-chroma&#39;</span><span class=p>,</span> <span class=n>jnd</span><span class=o>=</span><span class=mf>0.2</span><span class=p>)</span>
<span class=go>color(srgb 1 0.4342 0.41183 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_15 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_15 spellcheck=false>c = Color('srgb', [2, -1, 0])
c.fit(method='lch-chroma', jnd=0.2)</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_15 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_15 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_15 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_15 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <h4 id=oklch-chroma>OkLCh Chroma<a class=headerlink href=#oklch-chroma title="Permanent link"></a></h4> <div class="admonition success"> <p class=admonition-title>The <code>lch-chroma</code> gamut mapping is registered in <code>Color</code> by default</p> </div> <p>The <a href=https://drafts.csswg.org/css-color/#binsearch>CSS Color Level 4 specification</a> currently recommends using the perceptually uniform OkLCh color space with the <abbr title="minimum delta E">MINDE</abbr> Chroma Reduction approach.</p> <p>OkLCh does a much better job holding hues constant. When combined with gamut mapping, it generally does a better job than CIELCh, but it does have limitations. When colors get near the edge of the visible spectrum, the shape of the color space distorts, and gamut mapping will not be as good. But if you are working within reasonable gamuts, it may be an excellent option.</p> <div class=playground id=__playground_16> <div class=playground-results id=__playground-results_16> <div class=color-command><div class=swatch-bar><span class=swatch title="rgb(255 153.9 169.87)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 153.9 169.87) 50%, rgb(255 153.9 169.87) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>c</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-chroma&#39;</span><span class=p>)</span>
<span class=go>color(srgb 1 0.60354 0.66617 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_16 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_16 spellcheck=false>c = Color('srgb', [2, -1, 0])
c.fit(method='oklch-chroma')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_16 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_16 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_16 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_16 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>Additionally, the <abbr title="just noticeable difference">JND</abbr> target can be controlled for tighter or looser gamut mapping via the <code>jnd</code> option. The default is <code>0.02</code>.</p> <div class=playground id=__playground_17> <div class=playground-results id=__playground-results_17> <div class=color-command><div class=swatch-bar><span class=swatch title="rgb(255 161.21 173.52)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 161.21 173.52) 50%, rgb(255 161.21 173.52) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>c</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-chroma&#39;</span><span class=p>,</span> <span class=n>jnd</span><span class=o>=</span><span class=mf>0.002</span><span class=p>)</span>
<span class=go>color(srgb 1 0.63219 0.68048 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_17 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_17 spellcheck=false>c = Color('srgb', [2, -1, 0])
c.fit(method='oklch-chroma', jnd=0.002)</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_17 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_17 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_17 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_17 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <h4 id=hct-chroma>HCT Chroma<a class=headerlink href=#hct-chroma title="Permanent link"></a></h4> <div class="admonition failure"> <p class=admonition-title>The <code>hct-chroma</code> gamut mapping is <strong>not</strong> registered in <code>Color</code> by default</p> </div> <p>Much like the other LCh chroma reduction algorithms, HCT Chroma performs gamut mapping exactly like <a href=#lch-chroma>LCh Chroma</a> with the exception that it uses the HCT color space as the working LCh color space.</p> <p>Google's Material Design uses a new color space called <a href=../colors/hct/ >HCT</a>. It uses the hue and chroma from <a href=../colors/cam16_jmh/ >CAM16</a> space and the tone/lightness from the <a href=../colors/lab_d65/ >CIELab</a> space. HCT takes advantage of the good hue preservation of CAM16 and has the better lightness predictability of CIELab. Using these characteristics, the color space is adept at generating tonal palettes with predictable lightness. This makes it easier to construct UIs with decent contrast. But to do this well, you must work in HCT and gamut map in HCT. For this reason, the HCT Chroma gamut mapping method was added.</p> <p>HCT Chroma is computationally the most expensive gamut mapping method that is offered. Since the color space used is based on the already computationally expensive CAM16 color space, and is made more expensive by blending that color space with CIELab, it is not the most performant approach, but when used in conjunction with the HCT color space, it can allow creating good tonal palettes:</p> <div class=playground id=__playground_18> <div class=playground-results id=__playground-results_18> <div class=color-command><div class=swatch-bar><span class="swatch swatch-gradient"><span class=swatch-color style="--swatch-stops: rgb(0 0 0) 0%,rgb(0 0 0) 8.333333333333334%,rgb(41 19 46) 8.333333333333334%,rgb(41 19 46) 16.666666666666668%,rgb(63 40 68) 16.666666666666668%,rgb(63 40 68) 25.0%,rgb(87 62 91) 25.0%,rgb(87 62 91) 33.333333333333336%,rgb(112 85 116) 33.333333333333336%,rgb(112 85 116) 41.66666666666667%,rgb(138 109 141) 41.66666666666667%,rgb(138 109 141) 50.00000000000001%,rgb(165 135 168) 50.00000000000001%,rgb(165 135 168) 58.33333333333334%,rgb(193 161 195) 58.33333333333334%,rgb(193 161 195) 66.66666666666667%,rgb(222 188 223) 66.66666666666667%,rgb(222 188 223) 75.0%,rgb(251 215 252) 75.0%,rgb(251 215 252) 83.33333333333333%,rgb(255 235 253) 83.33333333333333%,rgb(255 235 253) 91.66666666666666%,rgb(255 255 255) 91.66666666666666%,rgb(255 255 255) 99.99999999999999%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>c</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;hct&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>325</span><span class=p>,</span> <span class=mi>24</span><span class=p>,</span> <span class=mi>50</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>tones</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=mi>40</span><span class=p>,</span> <span class=mi>50</span><span class=p>,</span> <span class=mi>60</span><span class=p>,</span> <span class=mi>70</span><span class=p>,</span> <span class=mi>80</span><span class=p>,</span> <span class=mi>90</span><span class=p>,</span> <span class=mi>95</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Steps</span><span class=p>([</span><span class=n>c</span><span class=o>.</span><span class=n>clone</span><span class=p>()</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s1>&#39;tone&#39;</span><span class=p>,</span> <span class=n>tone</span><span class=p>)</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>to_string</span><span class=p>(</span><span class=nb>hex</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>fit</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;method&#39;</span><span class=p>:</span> <span class=s1>&#39;hct-chroma&#39;</span><span class=p>,</span> <span class=s1>&#39;jnd&#39;</span><span class=p>:</span> <span class=mf>0.0</span><span class=p>})</span> <span class=k>for</span> <span class=n>tone</span> <span class=ow>in</span> <span class=n>tones</span><span class=p>])</span>
<span class=go>[&#39;#000000&#39;, &#39;#29132e&#39;, &#39;#3f2844&#39;, &#39;#573e5b&#39;, &#39;#705574&#39;, &#39;#8a6d8d&#39;, &#39;#a587a8&#39;, &#39;#c1a1c3&#39;, &#39;#debcdf&#39;, &#39;#fbd7fc&#39;, &#39;#ffebfd&#39;, &#39;#ffffff&#39;]</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_18 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_18 spellcheck=false>c = Color('hct', [325, 24, 50])
tones = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 95, 100]
Steps([c.clone().set('tone', tone).convert('srgb').to_string(hex=True, fit={'method': 'hct-chroma', 'jnd': 0.0}) for tone in tones])</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_18 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_18 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_18 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_18 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>As shown above, the <abbr title="just noticeable difference">JND</abbr> target can be controlled for tighter or looser gamut mapping via the <code>jnd</code> option. The default is <code>2</code>, but to get tonal palette results comparable to Google Material, we are using <code>0.0</code>.</p> <p>To HCT Chroma plugin is not registered by default, but can be added by subclassing <code>Color</code>. You must register the <a href=../distance/#delta-e-hct>E<sub>hct</sub></a> distancing algorithm and the HCT color space as well.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>coloraide</span> <span class=kn>import</span> <span class=n>Color</span> <span class=k>as</span> <span class=n>Base</span>
<span class=kn>from</span> <span class=nn>coloraide.gamut.fit_hct_chroma</span> <span class=kn>import</span> <span class=n>HCTChroma</span>
<span class=kn>from</span> <span class=nn>coloraide.distance.delta_e_hct</span> <span class=kn>import</span> <span class=n>DEHCT</span>
<span class=kn>from</span> <span class=nn>coloraide.spaces.hct</span> <span class=kn>import</span> <span class=n>HCT</span>

<span class=k>class</span> <span class=nc>Color</span><span class=p>(</span><span class=n>Base</span><span class=p>):</span> <span class=o>...</span>

<span class=n>Color</span><span class=o>.</span><span class=n>register</span><span class=p>([</span><span class=n>HCT</span><span class=p>(),</span> <span class=n>DEHCT</span><span class=p>(),</span> <span class=n>HCTChroma</span><span class=p>()])</span>
</code></pre></div> <h3 id=ray-tracing-chroma-reduction>Ray Tracing Chroma Reduction<a class=headerlink href=#ray-tracing-chroma-reduction title="Permanent link"></a></h3> <div class="admonition warning"> <p class=admonition-title>Experimental Gamut Mapping</p> </div> <p>ColorAide has developed an experimental chroma reduction technique that employs ray tracing. This approach specifically targets RGB gamuts, or spaces that can be represented with RGB gamuts. Additionally, if ColorAide can detect a linear version of the targeted RGB gamut, that version will be used automatically for best results.</p> <p>The way this approach works is it takes a given color and converts it to a perceptual LCh like color space. Then the achromatic version of the color (chroma set to zero) is calculated. Both of these colors are converted to the targeted RGB color space. Then a ray is traced from the out of gamut RGB color to the achromatic color within the RGB cube representing the color gamut. The intersection of the line and the cube is returned as the most saturated color. Because the RGB space is not perceptual, the color is then corrected in the perceptual color space by setting the lightness and hue back to the original color's. Before the color is returned, a final clip is applied.</p> <p>This is an approximation, but with a couple of iterations of ray tracing and corrections before the final clip (backing off on the chroma a little on each attempt) you can get a color reasonably close to what you would get by reducing chroma via <abbr title="minimum delta E">MINDE</abbr> Chroma Reduction, but in less time.</p> <p>As noted, the one downside is that results aren't as accurate as using <abbr title="minimum delta E">MINDE</abbr> Chroma Reduction as it isn't directly operating in the perceptual space, but they are often very close.</p> <p>As noted earlier, the targeted gamut should be an RGB space or RGB equivalent space.</p> <div class=playground id=__playground_19> <div class=playground-results id=__playground-results_19> <div class=color-command><div class=swatch-bar><span class=swatch title="oklch(0.76692 0.16085 310.03)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(210.56 147.78 255) 50%, rgb(210.56 147.78 255) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;lch-raytrace&#39;</span><span class=p>)</span>
<span class=go>color(--oklch 0.76692 0.16085 310.03 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_19 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_19 spellcheck=false>Color('oklch(90% 0.8 270)').fit('srgb', method='lch-raytrace')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_19 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_19 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_19 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_19 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>As noted earlier, this method specifically targets RGB gamuts. This is because the ray tracing is performed on a simple RGB cube which is easy to calculate. ColorAide maps almost all non-RGB gamuts to an actual RGB gamut, and those gamuts are often associated with their linear RGB counterpart which is preferred when gamut mapping, but there are a few color spaces/models that do not map to an obvious RGB gamut.</p> <p>HPLuv, which is only defined as a cylindrical color space that represent only a subset of the sRGB color space has no defined RGB gamut on which to operate on. Additionally Okhsl and Okhsv are two cylindrical color spaces, based on the perceptual Oklab color space, that are meant to target the sRGB gamut, but are only a loose approximation which actually can slightly clip the sRGB gamut while simultaneously containing a few colors that exceed the sRGB gamut. ColorAide will not automatically associate these color spaces with an RGB gamuts as their is not one that precisely represent the colors in Okhsl and Okhsv.</p> <p>With that said, ColorAide will translate these spaces into a cube shape to apply gamut mapping on them if they are specifically used. In the case of HPLuv, results are usually fine, but you may find that gamut mapping Okhsl may not provide the intended results. When gamut mapping such spaces, you may want to use the closest RGB gamut.</p> <div class=playground id=__playground_20> <div class=playground-results id=__playground-results_20> <div class=color-command><div class=swatch-bar><span class="swatch swatch-gradient"><span class=swatch-color style="--swatch-stops: rgb(240.6 214.01 220.99) 0%,rgb(240.6 214.01 220.99) 1.0%,rgb(242.74 213.27 219.41) 1.0%,rgb(242.74 213.27 219.41) 2.0%,rgb(243.47 213.16 217.83) 2.0%,rgb(243.47 213.16 217.83) 3.0%,rgb(243.21 213.49 216.47) 3.0%,rgb(243.21 213.49 216.47) 4.0%,rgb(241.94 214.21 215.5) 4.0%,rgb(241.94 214.21 215.5) 5.0%,rgb(239.29 215.44 215.26) 5.0%,rgb(239.29 215.44 215.26) 6.0%,rgb(233.96 217.58 216.56) 6.0%,rgb(233.96 217.58 216.56) 7.0%,rgb(220.94 222.08 222.21) 7.0%,rgb(220.94 222.08 222.21) 8.0%,rgb(148.89 238.74 253.63) 8.0%,rgb(148.89 238.74 253.63) 9.0%,rgb(223.48 221.29 220.79) 9.0%,rgb(223.48 221.29 220.79) 10.0%,rgb(234.56 217.82 213.07) 10.0%,rgb(234.56 217.82 213.07) 11.0%,rgb(238.82 216.54 208.87) 11.0%,rgb(238.82 216.54 208.87) 12.0%,rgb(241.05 215.98 205.71) 12.0%,rgb(241.05 215.98 205.71) 13.0%,rgb(242.43 215.73 202.93) 13.0%,rgb(242.43 215.73 202.93) 14.0%,rgb(243.38 215.64 200.27) 14.0%,rgb(243.38 215.64 200.27) 15.0%,rgb(244.1 215.67 197.57) 15.0%,rgb(244.1 215.67 197.57) 16.0%,rgb(244.65 215.77 194.78) 16.0%,rgb(244.65 215.77 194.78) 17.0%,rgb(245.07 215.94 191.83) 17.0%,rgb(245.07 215.94 191.83) 18.0%,rgb(245.34 216.2 188.74) 18.0%,rgb(245.34 216.2 188.74) 19.0%,rgb(245.4 216.54 185.55) 19.0%,rgb(245.4 216.54 185.55) 20.0%,rgb(245.18 217.01 182.41) 20.0%,rgb(245.18 217.01 182.41) 21.0%,rgb(244.52 217.62 179.64) 21.0%,rgb(244.52 217.62 179.64) 22.0%,rgb(243.16 218.42 177.92) 22.0%,rgb(243.16 218.42 177.92) 23.0%,rgb(240.62 219.45 178.8) 23.0%,rgb(240.62 219.45 178.8) 24.0%,rgb(235.75 220.72 186.19) 24.0%,rgb(235.75 220.72 186.19) 25.0%,rgb(224.82 221.82 213.18) 25.0%,rgb(224.82 221.82 213.18) 26.0%,rgb(255 219.66 83.409) 26.0%,rgb(255 219.66 83.409) 27.0%,rgb(254.9 221.57 0) 27.0%,rgb(254.9 221.57 0) 28.0%,rgb(248.07 224.62 0) 28.0%,rgb(248.07 224.62 0) 29.0%,rgb(240.82 227.68 0) 29.0%,rgb(240.82 227.68 0) 30.0%,rgb(221.14 220.2 234.27) 30.0%,rgb(221.14 220.2 234.27) 31.0%,rgb(222.13 218.61 241.77) 31.0%,rgb(222.13 218.61 241.77) 32.0%,rgb(222.91 219.42 234.8) 32.0%,rgb(222.91 219.42 234.8) 33.0%,rgb(225.25 217.15 242.94) 33.0%,rgb(225.25 217.15 242.94) 34.0%,rgb(209.34 233.01 163.99) 34.0%,rgb(209.34 233.01 163.99) 35.0%,rgb(178.98 248.23 0.00001) 35.0%,rgb(178.98 248.23 0.00001) 36.0%,rgb(161.9 252.34 0) 36.0%,rgb(161.9 252.34 0) 37.0%,rgb(146.35 255 52.405) 37.0%,rgb(146.35 255 52.405) 38.0%,rgb(139.33 255 95.653) 38.0%,rgb(139.33 255 95.653) 39.0%,rgb(132.67 255 120.15) 39.0%,rgb(132.67 255 120.15) 40.0%,rgb(126.05 255 137.93) 40.0%,rgb(126.05 255 137.93) 41.0%,rgb(234.11 215.17 232.15) 41.0%,rgb(234.11 215.17 232.15) 42.0%,rgb(219.39 222.96 220.19) 42.0%,rgb(219.39 222.96 220.19) 43.0%,rgb(211.88 226.25 216.52) 43.0%,rgb(211.88 226.25 216.52) 44.0%,rgb(208.96 227.3 216.46) 44.0%,rgb(208.96 227.3 216.46) 45.0%,rgb(210.07 226.69 218.09) 45.0%,rgb(210.07 226.69 218.09) 46.0%,rgb(215.84 224.27 220.44) 46.0%,rgb(215.84 224.27 220.44) 47.0%,rgb(228.44 219 222.79) 47.0%,rgb(228.44 219 222.79) 48.0%,rgb(253.98 207.12 224.12) 48.0%,rgb(253.98 207.12 224.12) 49.0%,rgb(53.428 255 222.88) 49.0%,rgb(53.428 255 222.88) 50.0%,rgb(40.665 255 228.68) 50.0%,rgb(40.665 255 228.68) 51.0%,rgb(9.1225 255 235.96) 51.0%,rgb(9.1225 255 235.96) 52.0%,rgb(0 254.27 242.71) 52.0%,rgb(0 254.27 242.71) 53.0%,rgb(0 253.41 249.16) 53.0%,rgb(0 253.41 249.16) 54.0%,rgb(22.713 252.21 255) 54.0%,rgb(22.713 252.21 255) 55.0%,rgb(92.912 247.4 255) 55.0%,rgb(92.912 247.4 255) 56.0%,rgb(118.08 243.74 255) 56.0%,rgb(118.08 243.74 255) 57.0%,rgb(233.06 218.06 215.92) 57.0%,rgb(233.06 218.06 215.92) 58.0%,rgb(201.33 227.61 232.81) 58.0%,rgb(201.33 227.61 232.81) 59.0%,rgb(192.41 229.59 238.88) 59.0%,rgb(192.41 229.59 238.88) 60.0%,rgb(190.31 229.79 241.81) 60.0%,rgb(190.31 229.79 241.81) 61.0%,rgb(190.93 229.37 243.31) 61.0%,rgb(190.93 229.37 243.31) 62.0%,rgb(192.74 228.7 243.99) 62.0%,rgb(192.74 228.7 243.99) 63.0%,rgb(195.07 227.94 244.15) 63.0%,rgb(195.07 227.94 244.15) 64.0%,rgb(197.59 227.15 243.93) 64.0%,rgb(197.59 227.15 243.93) 65.0%,rgb(200.15 226.38 243.44) 65.0%,rgb(200.15 226.38 243.44) 66.0%,rgb(202.66 225.65 242.72) 66.0%,rgb(202.66 225.65 242.72) 67.0%,rgb(205.12 224.95 241.76) 67.0%,rgb(205.12 224.95 241.76) 68.0%,rgb(207.53 224.3 240.53) 68.0%,rgb(207.53 224.3 240.53) 69.0%,rgb(210 223.68 238.86) 69.0%,rgb(210 223.68 238.86) 70.0%,rgb(212.78 223.07 236.25) 70.0%,rgb(212.78 223.07 236.25) 71.0%,rgb(216.71 222.42 230.93) 71.0%,rgb(216.71 222.42 230.93) 72.0%,rgb(228.32 221.06 208.34) 72.0%,rgb(228.32 221.06 208.34) 73.0%,rgb(205.14 220.32 255) 73.0%,rgb(205.14 220.32 255) 74.0%,rgb(207.08 219.11 255) 74.0%,rgb(207.08 219.11 255) 75.0%,rgb(241.02 221.32 158.5) 75.0%,rgb(241.02 221.32 158.5) 76.0%,rgb(221.74 221.79 222.05) 76.0%,rgb(221.74 221.79 222.05) 77.0%,rgb(219.19 220.95 234.32) 77.0%,rgb(219.19 220.95 234.32) 78.0%,rgb(219.21 220.15 239.36) 78.0%,rgb(219.21 220.15 239.36) 79.0%,rgb(220.12 219.39 241.85) 79.0%,rgb(220.12 219.39 241.85) 80.0%,rgb(221.43 218.69 242.99) 80.0%,rgb(221.43 218.69 242.99) 81.0%,rgb(222.9 218.08 243.11) 81.0%,rgb(222.9 218.08 243.11) 82.0%,rgb(224.34 217.66 242.15) 82.0%,rgb(224.34 217.66 242.15) 83.0%,rgb(225.4 217.64 239.59) 83.0%,rgb(225.4 217.64 239.59) 84.0%,rgb(225.14 218.72 233.5) 84.0%,rgb(225.14 218.72 233.5) 85.0%,rgb(218.36 224.4 212.56) 85.0%,rgb(218.36 224.4 212.56) 86.0%,rgb(236.08 208.81 255) 86.0%,rgb(236.08 208.81 255) 87.0%,rgb(240.54 207.33 255) 87.0%,rgb(240.54 207.33 255) 88.0%,rgb(245.24 205.45 255) 88.0%,rgb(245.24 205.45 255) 89.0%,rgb(250.43 203.09 255) 89.0%,rgb(250.43 203.09 255) 90.0%,rgb(255 201.14 253.58) 90.0%,rgb(255 201.14 253.58) 91.0%,rgb(255 202.19 247.96) 91.0%,rgb(255 202.19 247.96) 92.0%,rgb(255 202.95 243.12) 92.0%,rgb(255 202.95 243.12) 93.0%,rgb(255 203.52 238.84) 93.0%,rgb(255 203.52 238.84) 94.0%,rgb(255 203.9 234.96) 94.0%,rgb(255 203.9 234.96) 95.0%,rgb(255 204.05 231.34) 95.0%,rgb(255 204.05 231.34) 96.0%,rgb(207.78 227.34 219.25) 96.0%,rgb(207.78 227.34 219.25) 97.0%,rgb(219.86 222.58 221.6) 97.0%,rgb(219.86 222.58 221.6) 98.0%,rgb(235.56 216.06 222.23) 98.0%,rgb(235.56 216.06 222.23) 99.0%,rgb(240.6 214.01 220.99) 99.0%,rgb(240.6 214.01 220.99) 100.0%"></span></span></div><div class=swatch-bar><span class="swatch swatch-gradient"><span class=swatch-color style="--swatch-stops: rgb(255 206.25 220.24) 0%,rgb(255 206.25 220.24) 1.0%,rgb(255 206.62 217.65) 1.0%,rgb(255 206.62 217.65) 2.0%,rgb(255 206.98 215.16) 2.0%,rgb(255 206.98 215.16) 3.0%,rgb(255 207.32 212.74) 3.0%,rgb(255 207.32 212.74) 4.0%,rgb(255 207.66 210.37) 4.0%,rgb(255 207.66 210.37) 5.0%,rgb(255 207.99 208.03) 5.0%,rgb(255 207.99 208.03) 6.0%,rgb(255 208.32 205.71) 6.0%,rgb(255 208.32 205.71) 7.0%,rgb(255 208.65 203.39) 7.0%,rgb(255 208.65 203.39) 8.0%,rgb(255 208.99 201.07) 8.0%,rgb(255 208.99 201.07) 9.0%,rgb(255 209.34 198.71) 9.0%,rgb(255 209.34 198.71) 10.0%,rgb(255 209.69 196.32) 10.0%,rgb(255 209.69 196.32) 11.0%,rgb(255 210.06 193.86) 11.0%,rgb(255 210.06 193.86) 12.0%,rgb(255 210.44 191.32) 12.0%,rgb(255 210.44 191.32) 13.0%,rgb(255 210.83 188.67) 13.0%,rgb(255 210.83 188.67) 14.0%,rgb(255 211.24 185.87) 14.0%,rgb(255 211.24 185.87) 15.0%,rgb(255 211.67 182.89) 15.0%,rgb(255 211.67 182.89) 16.0%,rgb(255 212.12 179.67) 16.0%,rgb(255 212.12 179.67) 17.0%,rgb(255 212.6 176.15) 17.0%,rgb(255 212.6 176.15) 18.0%,rgb(255 213.11 172.26) 18.0%,rgb(255 213.11 172.26) 19.0%,rgb(255 213.67 167.87) 19.0%,rgb(255 213.67 167.87) 20.0%,rgb(255 214.28 162.85) 20.0%,rgb(255 214.28 162.85) 21.0%,rgb(255 214.96 157) 21.0%,rgb(255 214.96 157) 22.0%,rgb(254.26 215.9 151.76) 22.0%,rgb(254.26 215.9 151.76) 23.0%,rgb(252.06 217.2 148.9) 23.0%,rgb(252.06 217.2 148.9) 24.0%,rgb(249.91 218.52 145.12) 24.0%,rgb(249.91 218.52 145.12) 25.0%,rgb(247.89 219.89 139.63) 25.0%,rgb(247.89 219.89 139.63) 26.0%,rgb(246.09 221.36 130.9) 26.0%,rgb(246.09 221.36 130.9) 27.0%,rgb(244.67 223.03 115.28) 27.0%,rgb(244.67 223.03 115.28) 28.0%,rgb(243.96 225.08 79.794) 28.0%,rgb(243.96 225.08 79.794) 29.0%,rgb(241.06 227.88 0) 29.0%,rgb(241.06 227.88 0) 30.0%,rgb(233.25 231.04 0) 30.0%,rgb(233.25 231.04 0) 31.0%,rgb(224.76 234.26 0) 31.0%,rgb(224.76 234.26 0) 32.0%,rgb(215.41 237.58 0) 32.0%,rgb(215.41 237.58 0) 33.0%,rgb(204.92 241.03 0) 33.0%,rgb(204.92 241.03 0) 34.0%,rgb(192.91 244.64 0) 34.0%,rgb(192.91 244.64 0) 35.0%,rgb(178.78 248.47 0) 35.0%,rgb(178.78 248.47 0) 36.0%,rgb(161.53 252.56 0) 36.0%,rgb(161.53 252.56 0) 37.0%,rgb(146.33 255 51.426) 37.0%,rgb(146.33 255 51.426) 38.0%,rgb(139.24 255 94.92) 38.0%,rgb(139.24 255 94.92) 39.0%,rgb(132.49 255 119.42) 39.0%,rgb(132.49 255 119.42) 40.0%,rgb(125.93 255 137.23) 40.0%,rgb(125.93 255 137.23) 41.0%,rgb(119.44 255 151.45) 41.0%,rgb(119.44 255 151.45) 42.0%,rgb(112.92 255 163.44) 42.0%,rgb(112.92 255 163.44) 43.0%,rgb(106.25 255 173.93) 43.0%,rgb(106.25 255 173.93) 44.0%,rgb(99.327 255 183.35) 44.0%,rgb(99.327 255 183.35) 45.0%,rgb(91.988 255 191.99) 45.0%,rgb(91.988 255 191.99) 46.0%,rgb(84.026 255 200.08) 46.0%,rgb(84.026 255 200.08) 47.0%,rgb(75.12 255 207.75) 47.0%,rgb(75.12 255 207.75) 48.0%,rgb(64.721 255 215.14) 48.0%,rgb(64.721 255 215.14) 49.0%,rgb(51.701 255 222.36) 49.0%,rgb(51.701 255 222.36) 50.0%,rgb(32.741 255 229.5) 50.0%,rgb(32.741 255 229.5) 51.0%,rgb(0 255 236.66) 51.0%,rgb(0 255 236.66) 52.0%,rgb(0 254.79 243.47) 52.0%,rgb(0 254.79 243.47) 53.0%,rgb(0 253.92 249.93) 53.0%,rgb(0 253.92 249.93) 54.0%,rgb(52.958 251.22 253.96) 54.0%,rgb(52.958 251.22 253.96) 55.0%,rgb(98.665 247 254.71) 55.0%,rgb(98.665 247 254.71) 56.0%,rgb(121 243.73 255) 56.0%,rgb(121 243.73 255) 57.0%,rgb(137.06 240.87 255) 57.0%,rgb(137.06 240.87 255) 58.0%,rgb(148.42 238.54 255) 58.0%,rgb(148.42 238.54 255) 59.0%,rgb(157.06 236.59 255) 59.0%,rgb(157.06 236.59 255) 60.0%,rgb(163.94 234.91 255) 60.0%,rgb(163.94 234.91 255) 61.0%,rgb(169.61 233.44 255) 61.0%,rgb(169.61 233.44 255) 62.0%,rgb(174.42 232.14 255) 62.0%,rgb(174.42 232.14 255) 63.0%,rgb(178.59 230.96 255) 63.0%,rgb(178.59 230.96 255) 64.0%,rgb(182.28 229.88 255) 64.0%,rgb(182.28 229.88 255) 65.0%,rgb(185.6 228.87 255) 65.0%,rgb(185.6 228.87 255) 66.0%,rgb(188.62 227.93 255) 66.0%,rgb(188.62 227.93 255) 67.0%,rgb(191.43 227.03 255) 67.0%,rgb(191.43 227.03 255) 68.0%,rgb(194.05 226.18 255) 68.0%,rgb(194.05 226.18 255) 69.0%,rgb(196.54 225.35 255) 69.0%,rgb(196.54 225.35 255) 70.0%,rgb(198.93 224.54 255) 70.0%,rgb(198.93 224.54 255) 71.0%,rgb(201.23 223.74 255) 71.0%,rgb(201.23 223.74 255) 72.0%,rgb(203.48 222.95 255) 72.0%,rgb(203.48 222.95 255) 73.0%,rgb(205.68 222.17 255) 73.0%,rgb(205.68 222.17 255) 74.0%,rgb(207.87 221.38 255) 74.0%,rgb(207.87 221.38 255) 75.0%,rgb(210.04 220.58 255) 75.0%,rgb(210.04 220.58 255) 76.0%,rgb(212.23 219.77 255) 76.0%,rgb(212.23 219.77 255) 77.0%,rgb(214.43 218.94 255) 77.0%,rgb(214.43 218.94 255) 78.0%,rgb(216.67 218.09 255) 78.0%,rgb(216.67 218.09 255) 79.0%,rgb(218.97 217.2 255) 79.0%,rgb(218.97 217.2 255) 80.0%,rgb(221.34 216.27 255) 80.0%,rgb(221.34 216.27 255) 81.0%,rgb(223.79 215.28 255) 81.0%,rgb(223.79 215.28 255) 82.0%,rgb(226.37 214.23 255) 82.0%,rgb(226.37 214.23 255) 83.0%,rgb(229.09 213.1 255) 83.0%,rgb(229.09 213.1 255) 84.0%,rgb(232 211.86 255) 84.0%,rgb(232 211.86 255) 85.0%,rgb(235.14 210.48 255) 85.0%,rgb(235.14 210.48 255) 86.0%,rgb(238.59 208.93 255) 86.0%,rgb(238.59 208.93 255) 87.0%,rgb(242.42 207.16 255) 87.0%,rgb(242.42 207.16 255) 88.0%,rgb(246.74 205.08 255) 88.0%,rgb(246.74 205.08 255) 89.0%,rgb(251.72 202.6 255) 89.0%,rgb(251.72 202.6 255) 90.0%,rgb(255 200.58 254.5) 90.0%,rgb(255 200.58 254.5) 91.0%,rgb(255 201.64 248.8) 91.0%,rgb(255 201.64 248.8) 92.0%,rgb(255 202.52 243.86) 92.0%,rgb(255 202.52 243.86) 93.0%,rgb(255 203.27 239.5) 93.0%,rgb(255 203.27 239.5) 94.0%,rgb(255 203.91 235.6) 94.0%,rgb(255 203.91 235.6) 95.0%,rgb(255 204.48 232.06) 95.0%,rgb(255 204.48 232.06) 96.0%,rgb(255 204.98 228.8) 96.0%,rgb(255 204.98 228.8) 97.0%,rgb(255 205.44 225.78) 97.0%,rgb(255 205.44 225.78) 98.0%,rgb(255 205.86 222.93) 98.0%,rgb(255 205.86 222.93) 99.0%,rgb(255 206.25 220.24) 99.0%,rgb(255 206.25 220.24) 100.0%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Steps</span><span class=p>([</span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;okhsl&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-raytrace&#39;</span><span class=p>)</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>Color</span><span class=o>.</span><span class=n>steps</span><span class=p>([</span><span class=s1>&#39;oklch(90% 0.4 0)&#39;</span><span class=p>,</span> <span class=s1>&#39;oklch(90% 0.4 360)&#39;</span><span class=p>],</span> <span class=n>steps</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>space</span><span class=o>=</span><span class=s1>&#39;oklch&#39;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s1>&#39;longer&#39;</span><span class=p>)])</span>
<span class=go>[color(--oklch 0.9 0.03085 0 / 1), color(--oklch 0.9 0.03372 3.6364 / 1), color(--oklch 0.9 0.03428 7.2727 / 1), color(--oklch 0.9 0.03333 10.909 / 1), color(--oklch 0.9 0.03093 14.545 / 1), color(--oklch 0.9 0.02652 18.182 / 1), color(--oklch 0.9 0.01818 21.818 / 1), color(--oklch 0.9 0.00125 205.45 / 1), color(--oklch 0.9 0.08837 209.09 / 1), color(--oklch 0.9 0.00249 32.727 / 1), color(--oklch 0.9 0.01967 36.364 / 1), color(--oklch 0.9 0.02693 40 / 1), color(--oklch 0.9 0.03129 43.636 / 1), color(--oklch 0.9 0.03452 47.273 / 1), color(--oklch 0.9 0.03733 50.909 / 1), color(--oklch 0.9 0.04004 54.545 / 1), color(--oklch 0.9 0.04282 58.182 / 1), color(--oklch 0.9 0.04576 61.818 / 1), color(--oklch 0.9 0.04888 65.455 / 1), color(--oklch 0.9 0.05211 69.091 / 1), color(--oklch 0.9 0.05531 72.727 / 1), color(--oklch 0.9 0.0581 76.364 / 1), color(--oklch 0.9 0.05966 80 / 1), color(--oklch 0.9 0.05812 83.636 / 1), color(--oklch 0.9 0.04843 87.273 / 1), color(--oklch 0.9 0.01209 90.909 / 1), color(--oklch 0.89937 0.15498 94.386 / 1), color(--oklch 0.89974 0.18601 98.125 / 1), color(--oklch 0.89966 0.18821 101.76 / 1), color(--oklch 0.89958 0.19123 105.39 / 1), color(--oklch 0.9 0.01909 289.09 / 1), color(--oklch 0.9 0.03162 292.73 / 1), color(--oklch 0.9 0.02113 296.36 / 1), color(--oklch 0.9 0.03591 300 / 1), color(--oklch 0.9 0.09349 123.64 / 1), color(--oklch 0.89972 0.23298 127.29 / 1), color(--oklch 0.89981 0.24562 130.93 / 1), color(--oklch 0.89983 0.24422 134.57 / 1), color(--oklch 0.89975 0.22285 138.23 / 1), color(--oklch 0.89969 0.20672 141.89 / 1), color(--oklch 0.89955 0.19433 145.57 / 1), color(--oklch 0.9 0.03067 329.09 / 1), color(--oklch 0.9 0.00536 152.73 / 1), color(--oklch 0.9 0.0202 156.36 / 1), color(--oklch 0.9 0.02441 160 / 1), color(--oklch 0.9 0.02118 163.64 / 1), color(--oklch 0.9 0.01041 167.27 / 1), color(--oklch 0.9 0.01147 350.91 / 1), color(--oklch 0.9 0.05689 354.55 / 1), color(--oklch 0.89935 0.15617 178.56 / 1), color(--oklch 0.89948 0.15646 181.52 / 1), color(--oklch 0.8996 0.15771 185.24 / 1), color(--oklch 0.89966 0.15592 188.92 / 1), color(--oklch 0.89971 0.15425 192.59 / 1), color(--oklch 0.89974 0.15138 196.25 / 1), color(--oklch 0.89943 0.12855 199.78 / 1), color(--oklch 0.89888 0.11273 203.23 / 1), color(--oklch 0.9 0.01686 27.273 / 1), color(--oklch 0.9 0.0287 210.91 / 1), color(--oklch 0.9 0.04084 214.55 / 1), color(--oklch 0.9 0.04427 218.18 / 1), color(--oklch 0.9 0.04441 221.82 / 1), color(--oklch 0.9 0.0431 225.45 / 1), color(--oklch 0.9 0.04112 229.09 / 1), color(--oklch 0.9 0.03883 232.73 / 1), color(--oklch 0.9 0.03641 236.36 / 1), color(--oklch 0.9 0.03393 240 / 1), color(--oklch 0.9 0.03138 243.64 / 1), color(--oklch 0.9 0.02866 247.27 / 1), color(--oklch 0.9 0.02552 250.91 / 1), color(--oklch 0.9 0.0212 254.55 / 1), color(--oklch 0.9 0.01317 258.18 / 1), color(--oklch 0.9 0.01887 81.818 / 1), color(--oklch 0.89513 0.05054 266.64 / 1), color(--oklch 0.89411 0.05112 270.71 / 1), color(--oklch 0.9 0.0831 92.727 / 1), color(--oklch 0.9 0.00036 276.36 / 1), color(--oklch 0.9 0.01827 280 / 1), color(--oklch 0.9 0.02615 283.64 / 1), color(--oklch 0.9 0.03053 287.27 / 1), color(--oklch 0.9 0.0331 290.91 / 1), color(--oklch 0.9 0.03429 294.55 / 1), color(--oklch 0.9 0.03388 298.18 / 1), color(--oklch 0.9 0.03076 301.82 / 1), color(--oklch 0.9 0.02106 305.45 / 1), color(--oklch 0.9 0.01717 129.09 / 1), color(--oklch 0.89711 0.06859 311.4 / 1), color(--oklch 0.89822 0.07315 315.6 / 1), color(--oklch 0.89892 0.07887 319.57 / 1), color(--oklch 0.89935 0.08605 323.4 / 1), color(--oklch 0.89961 0.091 327.14 / 1), color(--oklch 0.89954 0.08381 330.78 / 1), color(--oklch 0.89931 0.07814 334.37 / 1), color(--oklch 0.89895 0.07357 337.95 / 1), color(--oklch 0.89839 0.06993 341.53 / 1), color(--oklch 0.89755 0.06712 345.11 / 1), color(--oklch 0.9 0.0235 169.09 / 1), color(--oklch 0.9 0.00322 172.73 / 1), color(--oklch 0.9 0.02296 356.36 / 1), color(--oklch 0.9 0.03085 0 / 1)]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Steps</span><span class=p>([</span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-raytrace&#39;</span><span class=p>)</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>Color</span><span class=o>.</span><span class=n>steps</span><span class=p>([</span><span class=s1>&#39;oklch(90% 0.4 0)&#39;</span><span class=p>,</span> <span class=s1>&#39;oklch(90% 0.4 360)&#39;</span><span class=p>],</span> <span class=n>steps</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>space</span><span class=o>=</span><span class=s1>&#39;oklch&#39;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s1>&#39;longer&#39;</span><span class=p>)])</span>
<span class=go>[color(--oklch 0.89826 0.05764 359.27 / 1), color(--oklch 0.8982 0.05622 3.0067 / 1), color(--oklch 0.89815 0.05508 6.7641 / 1), color(--oklch 0.89811 0.05421 10.54 / 1), color(--oklch 0.89808 0.05357 14.332 / 1), color(--oklch 0.89807 0.05317 18.133 / 1), color(--oklch 0.89807 0.053 21.937 / 1), color(--oklch 0.89809 0.05304 25.739 / 1), color(--oklch 0.89812 0.05331 29.53 / 1), color(--oklch 0.89817 0.0538 33.304 / 1), color(--oklch 0.89824 0.05452 37.056 / 1), color(--oklch 0.89832 0.05548 40.78 / 1), color(--oklch 0.89842 0.05669 44.474 / 1), color(--oklch 0.89853 0.05818 48.136 / 1), color(--oklch 0.89866 0.05998 51.765 / 1), color(--oklch 0.89879 0.06211 55.364 / 1), color(--oklch 0.89894 0.06464 58.935 / 1), color(--oklch 0.89909 0.06763 62.482 / 1), color(--oklch 0.89925 0.07117 66.008 / 1), color(--oklch 0.89942 0.07537 69.518 / 1), color(--oklch 0.89961 0.08039 73.014 / 1), color(--oklch 0.89981 0.08642 76.496 / 1), color(--oklch 0.9 0.09171 80 / 1), color(--oklch 0.9 0.09431 83.636 / 1), color(--oklch 0.9 0.09824 87.273 / 1), color(--oklch 0.9 0.10431 90.909 / 1), color(--oklch 0.9 0.11404 94.545 / 1), color(--oklch 0.9 0.13046 98.182 / 1), color(--oklch 0.9 0.16086 101.82 / 1), color(--oklch 0.90019 0.19135 105.38 / 1), color(--oklch 0.90019 0.19534 109.06 / 1), color(--oklch 0.90018 0.20033 112.73 / 1), color(--oklch 0.90018 0.20645 116.39 / 1), color(--oklch 0.90017 0.21384 120.06 / 1), color(--oklch 0.90017 0.22272 123.72 / 1), color(--oklch 0.90016 0.23333 127.37 / 1), color(--oklch 0.90015 0.24604 131.01 / 1), color(--oklch 0.89977 0.24463 134.54 / 1), color(--oklch 0.89964 0.22341 138.17 / 1), color(--oklch 0.89952 0.20742 141.82 / 1), color(--oklch 0.8994 0.19501 145.46 / 1), color(--oklch 0.89929 0.18521 149.11 / 1), color(--oklch 0.89919 0.17741 152.77 / 1), color(--oklch 0.89911 0.17122 156.42 / 1), color(--oklch 0.89905 0.16635 160.08 / 1), color(--oklch 0.899 0.1626 163.74 / 1), color(--oklch 0.89897 0.15985 167.4 / 1), color(--oklch 0.89896 0.15801 171.05 / 1), color(--oklch 0.89896 0.15702 174.71 / 1), color(--oklch 0.89897 0.15685 178.36 / 1), color(--oklch 0.89898 0.15751 182 / 1), color(--oklch 0.89951 0.15806 185.6 / 1), color(--oklch 0.90114 0.15611 189.05 / 1), color(--oklch 0.90116 0.15444 192.73 / 1), color(--oklch 0.9 0.14532 196.36 / 1), color(--oklch 0.9 0.12545 200 / 1), color(--oklch 0.89989 0.11089 203.4 / 1), color(--oklch 0.89985 0.09858 206.92 / 1), color(--oklch 0.8998 0.08908 210.41 / 1), color(--oklch 0.89976 0.08157 213.89 / 1), color(--oklch 0.89971 0.07551 217.36 / 1), color(--oklch 0.89966 0.07054 220.83 / 1), color(--oklch 0.89961 0.06641 224.3 / 1), color(--oklch 0.89957 0.06296 227.78 / 1), color(--oklch 0.89952 0.06004 231.27 / 1), color(--oklch 0.89947 0.05758 234.78 / 1), color(--oklch 0.89942 0.0555 238.32 / 1), color(--oklch 0.89938 0.05374 241.89 / 1), color(--oklch 0.89934 0.05228 245.51 / 1), color(--oklch 0.8993 0.05108 249.16 / 1), color(--oklch 0.89926 0.05012 252.86 / 1), color(--oklch 0.89923 0.04939 256.61 / 1), color(--oklch 0.89921 0.04888 260.39 / 1), color(--oklch 0.89919 0.04859 264.21 / 1), color(--oklch 0.89918 0.04851 268.07 / 1), color(--oklch 0.89917 0.04864 271.94 / 1), color(--oklch 0.89917 0.04901 275.83 / 1), color(--oklch 0.89918 0.0496 279.72 / 1), color(--oklch 0.89919 0.05044 283.6 / 1), color(--oklch 0.89921 0.05154 287.46 / 1), color(--oklch 0.89924 0.05292 291.3 / 1), color(--oklch 0.89927 0.05461 295.1 / 1), color(--oklch 0.89931 0.05664 298.87 / 1), color(--oklch 0.89935 0.05907 302.59 / 1), color(--oklch 0.89939 0.06195 306.28 / 1), color(--oklch 0.89944 0.06538 309.93 / 1), color(--oklch 0.89948 0.06948 313.55 / 1), color(--oklch 0.89953 0.0744 317.14 / 1), color(--oklch 0.89958 0.08037 320.7 / 1), color(--oklch 0.89963 0.08773 324.25 / 1), color(--oklch 0.89894 0.09288 326.61 / 1), color(--oklch 0.89885 0.08555 330.17 / 1), color(--oklch 0.89877 0.07954 333.75 / 1), color(--oklch 0.89869 0.07455 337.34 / 1), color(--oklch 0.89861 0.07038 340.94 / 1), color(--oklch 0.89854 0.06688 344.56 / 1), color(--oklch 0.89846 0.06394 348.21 / 1), color(--oklch 0.89839 0.06145 351.87 / 1), color(--oklch 0.89832 0.05937 355.56 / 1), color(--oklch 0.89826 0.05764 359.27 / 1)]</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_20 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_20 spellcheck=false>Steps([c.fit('okhsl', method='oklch-raytrace') for c in Color.steps(['oklch(90% 0.4 0)', 'oklch(90% 0.4 360)'], steps=100, space='oklch', hue='longer')])
Steps([c.fit('srgb', method='oklch-raytrace') for c in Color.steps(['oklch(90% 0.4 0)', 'oklch(90% 0.4 360)'], steps=100, space='oklch', hue='longer')])</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_20 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_20 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_20 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_20 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>Lastly, all ray tracing methods allow configuring number of passes or traces performed, from as low as 1X up to 3X. More traces usually mean better results and closer hugging of the gamut shape, less traces means it will be faster, but with somewhat diminished results. By default 3X, the best, is used.</p> <p>Depending on the perceptual space used to correct the gamut mapping, this can expose non-optimal geometry. Consider the color <span><span class="swatch out-of-gamut" title="color(display-p3 1 1 0)"><span class=swatch-color style="--swatch-stops: #fffd00,#fffd00;"></span></span><code class=highlight><span class=nf>color</span><span class=g>(</span><span class=kc>display-p3</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=m>0</span><span class=g>)</span></code></span>. This can be particularly problematic when gamut mapping using CIELCh. 3X traces holds lightness very constant, and can get very desaturated yellow. If you use 1X traces, you get a less accurate color, but a color that makes more sense to the user. This is not a bug, but just the way a color space's geometry can work with you or against you. While this is not an issue in OkLCh, it has its own quirks.</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>3X Traces</label><label for=__tabbed_2_2>1X Traces</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><img alt="Traces 3X" src=../images/trace-3x.png></p> </div> <div class=tabbed-block> <p><img alt="Traces 1X" src=../images/trace-1x.png></p> </div> </div> </div> <h4 id=lch-ray-tracing-chroma-reduction>LCh Ray Tracing Chroma Reduction<a class=headerlink href=#lch-ray-tracing-chroma-reduction title="Permanent link"></a></h4> <div class="admonition success"> <p class=admonition-title>The <code>lch-raytrace</code> gamut mapping is registered in <code>Color</code> by default.</p> </div> <p>This is a ray tracing approach to chroma reduction using CIELCh D65. This can be a faster approach to gamut mapping.</p> <div class=playground id=__playground_21> <div class=playground-results id=__playground-results_21> <div class=color-command><div class=swatch-bar><span class=swatch title="oklch(0.76692 0.16085 310.03)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(210.56 147.78 255) 50%, rgb(210.56 147.78 255) 50%"></span></span> <span class=swatch title="oklch(0.76692 0.16085 310.03)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(210.56 147.78 255) 50%, rgb(210.56 147.78 255) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;lch-raytrace&#39;</span><span class=p>)</span>
<span class=go>color(--oklch 0.76692 0.16085 310.03 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;hsl&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;lch-raytrace&#39;</span><span class=p>)</span>
<span class=go>color(--oklch 0.76692 0.16085 310.03 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_21 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_21 spellcheck=false>Color('oklch(90% 0.8 270)').fit('srgb', method='lch-raytrace')
Color('oklch(90% 0.8 270)').fit('hsl', method='lch-raytrace')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_21 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_21 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_21 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_21 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>Ray Tracing Chroma Reduction can be performed at either 1X, 2X, or 3X traces, 3X being the default as it provides the best results. You can change the required traces on demand via the <code>traces</code> argument.</p> <div class=playground id=__playground_22> <div class=playground-results id=__playground-results_22> <div class=color-command><div class=swatch-bar><span class=swatch title="oklch(0.76567 0.14104 309.84)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(206.12 152.26 245.78) 50%, rgb(206.12 152.26 245.78) 50%"></span></span> <span class=swatch title="oklch(0.76723 0.15999 309.79)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(210.15 148.22 255) 50%, rgb(210.15 148.22 255) 50%"></span></span> <span class=swatch title="oklch(0.76692 0.16085 310.03)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(210.56 147.78 255) 50%, rgb(210.56 147.78 255) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;lch-raytrace&#39;</span><span class=p>,</span> <span class=n>traces</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=go>color(--oklch 0.76567 0.14104 309.84 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;hsl&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;lch-raytrace&#39;</span><span class=p>,</span> <span class=n>traces</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<span class=go>color(--oklch 0.76723 0.15999 309.79 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;hsl&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;lch-raytrace&#39;</span><span class=p>,</span> <span class=n>traces</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>
<span class=go>color(--oklch 0.76692 0.16085 310.03 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_22 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_22 spellcheck=false>Color('oklch(90% 0.8 270)').fit('srgb', method='lch-raytrace', traces=1)
Color('oklch(90% 0.8 270)').fit('hsl', method='lch-raytrace', traces=2)
Color('oklch(90% 0.8 270)').fit('hsl', method='lch-raytrace', traces=3)</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_22 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_22 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_22 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_22 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <h4 id=oklch-ray-tracing-chroma-reduction>OkLCh Ray Tracing Chroma Reduction<a class=headerlink href=#oklch-ray-tracing-chroma-reduction title="Permanent link"></a></h4> <div class="admonition success"> <p class=admonition-title>The <code>oklch-raytrace</code> gamut mapping is registered in <code>Color</code> by default.</p> </div> <p>This is a ray tracing approach to chroma reduction using OkLCh. This can be a faster approach to gamut mapping.</p> <div class=playground id=__playground_23> <div class=playground-results id=__playground-results_23> <div class=color-command><div class=swatch-bar><span class=swatch title="oklch(0.89822 0.04898 267.97)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(207.36 221.08 255) 50%, rgb(207.36 221.08 255) 50%"></span></span> <span class=swatch title="oklch(0.89822 0.04898 267.97)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(207.36 221.08 255) 50%, rgb(207.36 221.08 255) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-raytrace&#39;</span><span class=p>)</span>
<span class=go>color(--oklch 0.89822 0.04898 267.97 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;hsl&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-raytrace&#39;</span><span class=p>)</span>
<span class=go>color(--oklch 0.89822 0.04898 267.97 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_23 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_23 spellcheck=false>Color('oklch(90% 0.8 270)').fit('srgb', method='oklch-raytrace')
Color('oklch(90% 0.8 270)').fit('hsl', method='oklch-raytrace')</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_23 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_23 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_23 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_23 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>Ray Tracing Chroma Reduction can be performed at either 1X, 2X, or 3X traces, 3X being the default as it provides the best results. You can change the required traces on demand via the <code>traces</code> argument.</p> <div class=playground id=__playground_24> <div class=playground-results id=__playground-results_24> <div class=color-command><div class=swatch-bar><span class=swatch title="oklch(0.89735 0.04942 267.04)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(206.43 220.98 255) 50%, rgb(206.43 220.98 255) 50%"></span></span> <span class=swatch title="oklch(0.89817 0.04901 267.92)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(207.31 221.07 255) 50%, rgb(207.31 221.07 255) 50%"></span></span> <span class=swatch title="oklch(0.89822 0.04898 267.97)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(207.36 221.08 255) 50%, rgb(207.36 221.08 255) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-raytrace&#39;</span><span class=p>,</span> <span class=n>traces</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=go>color(--oklch 0.89735 0.04942 267.04 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;hsl&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-raytrace&#39;</span><span class=p>,</span> <span class=n>traces</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<span class=go>color(--oklch 0.89817 0.04901 267.92 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;oklch(90% 0.8 270)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;hsl&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-raytrace&#39;</span><span class=p>,</span> <span class=n>traces</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>
<span class=go>color(--oklch 0.89822 0.04898 267.97 / 1)</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_24 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_24 spellcheck=false>Color('oklch(90% 0.8 270)').fit('srgb', method='oklch-raytrace', traces=1)
Color('oklch(90% 0.8 270)').fit('hsl', method='oklch-raytrace', traces=2)
Color('oklch(90% 0.8 270)').fit('hsl', method='oklch-raytrace', traces=3)</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_24 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_24 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_24 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_24 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <h2 id=why-not-just-clip>Why Not Just Clip?<a class=headerlink href=#why-not-just-clip title="Permanent link"></a></h2> <p>In the past, clipping has been the default way in which out of gamut colors have been handled in web browsers. It is fast, and has generally been fine as most browsers have been constrained to using sRGB. But as modern browsers begin to adopt more wide gamut monitors such as Display P3, and CSS grows to support an assortment of wide and ultra wide color spaces, representing the best intent of an out of gamut color becomes even more important.</p> <p>One might see some cases of clipping and think it does a fine job and question why any of this complexity is necessary. In order to demonstrate the differences in gamut mapping vs clipping, see the example below. We start with the color <span><span class="swatch out-of-gamut" title="color(display-p3 1 1 0)"><span class=swatch-color style="--swatch-stops: #fffd00,#fffd00;"></span></span><code class=highlight><span class=nf>color</span><span class=g>(</span><span class=kc>display-p3</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=m>0</span><span class=g>)</span></code></span> and interpolate with in the LCh color space reducing just the lightness. This will leave both chroma and hue intact. The high chroma in lower and brighter lightness will be too much to display on the screen, so we will employ various gamut mapping approaches: <code>oklch-chroma</code>, <code>oklch-raytrace</code>, and <code>clip</code>. Notice how clipping, the bottom color set, clips these dark colors and makes them reddish. This is a very undesirable outcome.</p> <div class=playground id=__playground_25> <div class=playground-results id=__playground-results_25> <div class=color-command><div class=swatch-bar><span class="swatch swatch-gradient"><span class=swatch-color style="--swatch-stops: rgb(254.04 254.75 0) 0%,rgb(254.04 254.75 0) 5.0%,rgb(237.86 239.97 0) 5.0%,rgb(237.86 239.97 0) 10.0%,rgb(221.89 225.37 0) 10.0%,rgb(221.89 225.37 0) 15.0%,rgb(206.11 210.95 0) 15.0%,rgb(206.11 210.95 0) 20.0%,rgb(190.54 196.71 0) 20.0%,rgb(190.54 196.71 0) 25.0%,rgb(175.25 182.65 0) 25.0%,rgb(175.25 182.65 0) 30.0%,rgb(160.27 168.74 0) 30.0%,rgb(160.27 168.74 0) 35.0%,rgb(145.65 154.99 0) 35.0%,rgb(145.65 154.99 0) 40.0%,rgb(131.44 141.39 0) 40.0%,rgb(131.44 141.39 0) 45.0%,rgb(117.7 127.93 0) 45.0%,rgb(117.7 127.93 0) 50.0%,rgb(104.45 114.64 0) 50.0%,rgb(104.45 114.64 0) 55.0%,rgb(91.636 101.55 0) 55.0%,rgb(91.636 101.55 0) 60.0%,rgb(77.769 89.558 0) 60.0%,rgb(77.769 89.558 0) 65.0%,rgb(66.519 76.676 0) 65.0%,rgb(66.519 76.676 0) 70.0%,rgb(55.954 63.787 0) 70.0%,rgb(55.954 63.787 0) 75.0%,rgb(45.964 50.953 0) 75.0%,rgb(45.964 50.953 0) 80.0%,rgb(36.528 38.004 0) 80.0%,rgb(36.528 38.004 0) 85.0%,rgb(27.281 24.372 0) 85.0%,rgb(27.281 24.372 0) 90.0%,rgb(13.864 5.7117 0) 90.0%,rgb(13.864 5.7117 0) 95.0%,rgb(0 0 0) 95.0%,rgb(0 0 0) 100.0%"></span></span></div><div class=swatch-bar><span class="swatch swatch-gradient"><span class=swatch-color style="--swatch-stops: rgb(252.77 254.33 0) 0%,rgb(252.77 254.33 0) 5.0%,rgb(236.7 239.52 0) 5.0%,rgb(236.7 239.52 0) 10.0%,rgb(220.83 224.89 0) 10.0%,rgb(220.83 224.89 0) 15.0%,rgb(205.18 210.43 0) 15.0%,rgb(205.18 210.43 0) 20.0%,rgb(189.74 196.16 0) 20.0%,rgb(189.74 196.16 0) 25.0%,rgb(174.58 182.06 0) 25.0%,rgb(174.58 182.06 0) 30.0%,rgb(159.74 168.12 0) 30.0%,rgb(159.74 168.12 0) 35.0%,rgb(145.26 154.34 0) 35.0%,rgb(145.26 154.34 0) 40.0%,rgb(131.18 140.71 0) 40.0%,rgb(131.18 140.71 0) 45.0%,rgb(117.56 127.24 0) 45.0%,rgb(117.56 127.24 0) 50.0%,rgb(104.4 113.93 0) 50.0%,rgb(104.4 113.93 0) 55.0%,rgb(91.666 100.85 0) 55.0%,rgb(91.666 100.85 0) 60.0%,rgb(78.097 88.884 0) 60.0%,rgb(78.097 88.884 0) 65.0%,rgb(66.785 76.07 0) 65.0%,rgb(66.785 76.07 0) 70.0%,rgb(56.079 63.251 0) 70.0%,rgb(56.079 63.251 0) 75.0%,rgb(45.85 50.518 0) 75.0%,rgb(45.85 50.518 0) 80.0%,rgb(36.019 37.738 0) 80.0%,rgb(36.019 37.738 0) 85.0%,rgb(26.127 24.422 0) 85.0%,rgb(26.127 24.422 0) 90.0%,rgb(11.61 6.4331 0) 90.0%,rgb(11.61 6.4331 0) 95.0%,rgb(0 0 0) 95.0%,rgb(0 0 0) 100.0%"></span></span></div><div class=swatch-bar><span class="swatch swatch-gradient"><span class=swatch-color style="--swatch-stops: rgb(255 255 0) 0%,rgb(255 255 0) 5.0%,rgb(238.94 240.29 0) 5.0%,rgb(238.94 240.29 0) 10.0%,rgb(223 225.76 0) 10.0%,rgb(223 225.76 0) 15.0%,rgb(207.19 211.4 0) 15.0%,rgb(207.19 211.4 0) 20.0%,rgb(191.53 197.22 0) 20.0%,rgb(191.53 197.22 0) 25.0%,rgb(176.14 183.22 0) 25.0%,rgb(176.14 183.22 0) 30.0%,rgb(161.08 169.41 0) 30.0%,rgb(161.08 169.41 0) 35.0%,rgb(146.4 155.78 0) 35.0%,rgb(146.4 155.78 0) 40.0%,rgb(132.15 142.36 0) 40.0%,rgb(132.15 142.36 0) 45.0%,rgb(118.39 129.14 0) 45.0%,rgb(118.39 129.14 0) 50.0%,rgb(105.23 116.14 0) 50.0%,rgb(105.23 116.14 0) 55.0%,rgb(92.797 103.35 0) 55.0%,rgb(92.797 103.35 0) 60.0%,rgb(81.273 90.794 0) 60.0%,rgb(81.273 90.794 0) 65.0%,rgb(70.916 78.461 0) 65.0%,rgb(70.916 78.461 0) 70.0%,rgb(62.062 66.353 0) 70.0%,rgb(62.062 66.353 0) 75.0%,rgb(55.102 54.454 0) 75.0%,rgb(55.102 54.454 0) 80.0%,rgb(50.382 42.723 0) 80.0%,rgb(50.382 42.723 0) 85.0%,rgb(47.641 31.231 0) 85.0%,rgb(47.641 31.231 0) 90.0%,rgb(42.71 21.459 0) 90.0%,rgb(42.71 21.459 0) 95.0%,rgb(36.643 6.7995 0) 95.0%,rgb(36.643 6.7995 0) 100.0%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>yellow</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;color(display-p3 1 1 0)&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>lightness_mask</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;lch(0% none none)&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Steps</span><span class=p>([</span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-chroma&#39;</span><span class=p>)</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>Color</span><span class=o>.</span><span class=n>steps</span><span class=p>([</span><span class=n>yellow</span><span class=p>,</span> <span class=n>lightness_mask</span><span class=p>],</span> <span class=n>steps</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>space</span><span class=o>=</span><span class=s1>&#39;lch&#39;</span><span class=p>)])</span>
<span class=go>[color(--lch 97.465 94.62 99.75 / 1), color(--lch 92.331 90.393 100.13 / 1), color(--lch 87.198 86.173 100.55 / 1), color(--lch 82.066 81.961 101.02 / 1), color(--lch 76.937 77.757 101.55 / 1), color(--lch 71.805 73.555 102.11 / 1), color(--lch 66.67 69.351 102.69 / 1), color(--lch 61.531 65.141 103.29 / 1), color(--lch 56.383 60.915 103.87 / 1), color(--lch 51.228 56.667 104.41 / 1), color(--lch 46.064 52.392 104.88 / 1), color(--lch 40.894 48.096 105.32 / 1), color(--lch 35.868 44.145 107.16 / 1), color(--lch 30.655 39.689 107.04 / 1), color(--lch 25.351 34.762 106.45 / 1), color(--lch 19.948 28.676 105.59 / 1), color(--lch 14.357 21.334 103.71 / 1), color(--lch 8.2903 12.388 97.317 / 1), color(--lch 1.995 3.4746 59.961 / 1), color(--lch 0 0 none / 1)]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>yellow</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;color(display-p3 1 1 0)&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>lightness_mask</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;lch(0% none none)&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Steps</span><span class=p>([</span><span class=n>c</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;oklch-raytrace&#39;</span><span class=p>)</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>Color</span><span class=o>.</span><span class=n>steps</span><span class=p>([</span><span class=n>yellow</span><span class=p>,</span> <span class=n>lightness_mask</span><span class=p>],</span> <span class=n>steps</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>space</span><span class=o>=</span><span class=s1>&#39;lch&#39;</span><span class=p>)])</span>
<span class=go>[color(--lch 97.255 94.477 99.965 / 1), color(--lch 92.119 90.247 100.32 / 1), color(--lch 86.985 86.022 100.72 / 1), color(--lch 81.852 81.803 101.15 / 1), color(--lch 76.721 77.591 101.63 / 1), color(--lch 71.587 73.379 102.14 / 1), color(--lch 66.451 69.163 102.67 / 1), color(--lch 61.309 64.939 103.2 / 1), color(--lch 56.161 60.7 103.71 / 1), color(--lch 51.006 56.44 104.17 / 1), color(--lch 45.843 52.154 104.57 / 1), color(--lch 40.676 47.852 104.93 / 1), color(--lch 35.678 43.882 106.57 / 1), color(--lch 30.476 39.449 106.46 / 1), color(--lch 25.179 34.519 105.95 / 1), color(--lch 19.784 28.448 105.32 / 1), color(--lch 14.206 21.162 104.16 / 1), color(--lch 8.1645 12.297 100.68 / 1), color(--lch 1.977 3.0532 75.633 / 1), color(--lch 0 0 none / 1)]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>yellow</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;color(display-p3 1 1 0)&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>lightness_mask</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;lch(0% none none)&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Steps</span><span class=p>([</span><span class=n>c</span><span class=o>.</span><span class=n>clip</span><span class=p>(</span><span class=s1>&#39;srgb&#39;</span><span class=p>)</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>Color</span><span class=o>.</span><span class=n>steps</span><span class=p>([</span><span class=n>yellow</span><span class=p>,</span> <span class=n>lightness_mask</span><span class=p>],</span> <span class=n>steps</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>space</span><span class=o>=</span><span class=s1>&#39;lch&#39;</span><span class=p>)])</span>
<span class=go>[color(--lch 97.607 94.712 99.572 / 1), color(--lch 92.501 90.506 99.93 / 1), color(--lch 87.391 86.303 100.35 / 1), color(--lch 82.275 82.105 100.83 / 1), color(--lch 77.154 77.913 101.39 / 1), color(--lch 72.037 73.73 101.99 / 1), color(--lch 66.925 69.554 102.63 / 1), color(--lch 61.822 65.385 103.29 / 1), color(--lch 56.729 61.221 103.96 / 1), color(--lch 51.651 57.059 104.61 / 1), color(--lch 46.592 52.89 105.19 / 1), color(--lch 41.562 48.706 105.6 / 1), color(--lch 36.571 44.492 105.65 / 1), color(--lch 31.638 40.235 105.04 / 1), color(--lch 26.794 35.788 103.22 / 1), color(--lch 22.089 30.607 99.264 / 1), color(--lch 17.606 25.132 90.67 / 1), color(--lch 13.489 20.736 74.172 / 1), color(--lch 9.6852 17.439 57.169 / 1), color(--lch 4.9924 15.753 29.476 / 1)]</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_25 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_25 spellcheck=false># Gamut mapping in OkLCh with Ray Tracing
yellow = Color('color(display-p3 1 1 0)')
lightness_mask = Color('lch(0% none none)')
Steps([c.fit('srgb', method='oklch-chroma') for c in Color.steps([yellow, lightness_mask], steps=20, space='lch')])
# Gamut mapping in OkLCh
yellow = Color('color(display-p3 1 1 0)')
lightness_mask = Color('lch(0% none none)')
Steps([c.fit('srgb', method='oklch-raytrace') for c in Color.steps([yellow, lightness_mask], steps=20, space='lch')])
# Clipping
yellow = Color('color(display-p3 1 1 0)')
lightness_mask = Color('lch(0% none none)')
Steps([c.clip('srgb') for c in Color.steps([yellow, lightness_mask], steps=20, space='lch')])</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_25 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_25 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_25 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_25 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>There are times when clipping is simply preferred. It is fast, and if you are just trimming noise off channels, it is very useful, but if the idea is to present an in gamut color that tries to preserve as much of the intent of the original color as possible, other methods may be desired. There are no doubt better gamut methods available than what ColorAide offers currently, and more may be added in the future, but ColorAide can also be extended using 3<sup>rd</sup> party plugins as well.</p> <h2 id=pointers-gamut>Pointer's Gamut<a class=headerlink href=#pointers-gamut title="Permanent link"></a></h2> <div class="admonition new"> <p class=admonition-title>New 2.4</p> </div> <p>The Pointers gamut is (an approximation of) the gamut of real surface colors as can be seen by the human eye, based on the research by Michael R. Pointer (1980). What this means is that every color that can be reflected by the surface of an object of any material should be is inside the Pointers gamut. This does not include, however, those that do not occur naturally, such as neon lights, etc.</p> <p><img alt="Pointer's Gamut" src=../images/pointers-gamut.png></p> <p>While in the above image, it may appear that most of sRGB is in the gamut, it is important to note that the image is showing the maximum range of the gamut. The actual boundary will be different at different luminance levels.</p> <p><img alt="Pointer's Gamut lightness Levels" src=../images/pointer-gamut-lightness.png></p> <p>The gamuts previously discussed are bound by a color space's limits, but the Pointer's gamut applies to colors more generally and was created from observed data via research. Because it doesn't quite fit with the color space gamut API, ColorAide exposes two special functions to test if a color is in the Pointer's gamut and to fit a color to the gamut.</p> <p>To test if a color is within the gamut, simply call <code>in_pointer_gamut()</code>:</p> <div class=playground id=__playground_26> <div class=playground-results id=__playground-results_26> <div class=color-command><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_pointer_gamut</span><span class=p>()</span>
<span class=go>False</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Color</span><span class=p>(</span><span class=s1>&#39;orange&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>in_pointer_gamut</span><span class=p>()</span>
<span class=go>True</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_26 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_26 spellcheck=false>Color('red').in_pointer_gamut()
Color('orange').in_pointer_gamut()</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_26 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_26 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_26 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_26 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <p>ColorAide also provides a way to fit a color to the Pointer's gamut. The original gamut's data is described in LCh using illuminant C. Using this color space, we can estimate the chroma limit for any color based on it's lightness and hue. We can then reduce the chroma, preserving the lightness and hue. The image below shows the out of Pointer's gamut color <span><span class=swatch title=red><span class=swatch-color style="--swatch-stops: #ff0000,#ff0000;"></span></span><code class=highlight><span class=kc>red</span></code></span> (indicated by the <code>x</code>) which is clamped to the Pointer's gamut by reducing the chroma (indicated by the dot).</p> <p><img alt="Pointer's Gamut Fitted" src=../images/pointer-gamut-fit.png></p> <p>ColorAide provides the <code>fit_pointer_gamut()</code> method to perform this "fitting" of the color.</p> <div class=playground id=__playground_27> <div class=playground-results id=__playground-results_27> <div class=color-command><div class=swatch-bar><span class=swatch title="rgb(255 0 0)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(255 0 0) 50%, rgb(255 0 0) 50%"></span></span> <span class=swatch title="rgb(244 46.539 23.139)Copy to clipboard"><span class=swatch-color style="--swatch-stops: rgb(244 46.539 23.139) 50%, rgb(244 46.539 23.139) 50%"></span></span></div><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>color</span> <span class=o>=</span> <span class=n>Color</span><span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>color</span>
<span class=go>color(srgb 1 0 0 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>color</span><span class=o>.</span><span class=n>in_pointer_gamut</span><span class=p>()</span>
<span class=go>False</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>color</span><span class=o>.</span><span class=n>fit_pointer_gamut</span><span class=p>()</span>
<span class=go>color(srgb 0.95687 0.18251 0.09074 / 1)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>color</span><span class=o>.</span><span class=n>in_pointer_gamut</span><span class=p>()</span>
<span class=go>True</span>
</code></pre></div></div> </div> <div class="playground-code hidden" id=__playground-code_27 data-search-exclude> <form autocomplete=off> <textarea class=playground-inputs id=__playground-inputs_27 spellcheck=false>color = Color('red')
color
color.in_pointer_gamut()
color.fit_pointer_gamut()
color.in_pointer_gamut()</textarea> </form> </div> <div class=playground-footer data-search-exclude> <hr> <button id=__playground-edit_27 class=playground-edit title="Edit the current snippet">Edit</button> <button id=__playground-share_27 class=playground-share title="Copy URL to current snippet">Share</button> <button id=__playground-run_27 class="playground-run hidden" title="Run code (Ctrl + Enter)">Run</button> <button id=__playground-cancel_27 class="playground-cancel hidden" title="Cancel edit (Escape)">Cancel</button> <span class=gamut>Gamut: srgb</span> </div> </div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Much like <code>in_gamut()</code>, <code>in_pointer_gamut()</code> allows adjusting tolerance as well via the <code>tolerance</code> parameter.</p> </div> <style>
.info-container {display: inline-block; width: 100%;}
.info-container figure {display: table-cell;}
</style> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 26, 2024</span> </span> </aside> <footer class=sponsorship> <hr> <a href=https://github.com/sponsors/facelessuser title="Become a sponsor"> <span class="twemoji heart-throb-hover"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M7.655 14.916v-.001h-.002l-.006-.003-.018-.01a22.066 22.066 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22.094 22.094 0 0 1-3.433 2.414 7.152 7.152 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0Z"/></svg> </span> </a> <hr> </footer> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=footer.title> <a href=../contrast/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Contrast </div> </div> </a> <a href=../chromaticity/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Chromaticity </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 - 2023 <a href=https://github.com/facelessuser target=_blank rel=noopener>Isaac Muse</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> with emoji by <a href=https://github.com/twitter/twemoji target=_blank rel=noopener> Twemoji </a> </div> <div class=md-social> <a href=https://github.com/facelessuser target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "navigation.tabs", "navigation.top", "navigation.instant", "navigation.sections", "navigation.indexes", "toc.follow", "content.code.copy", "navigation.footer", "search.share", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.8fd75fb4.min.js></script> <script src=https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js></script> <script src=../playground-config-ec9e7aa7.js></script> <script src=https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js></script> <script src=../assets/coloraide-extras/extra-notebook-9AdLHl7q.js></script> <script src=../assets/pymdownx-extras/extra-loader-MCFnu0Wd.js></script> </body> </html>