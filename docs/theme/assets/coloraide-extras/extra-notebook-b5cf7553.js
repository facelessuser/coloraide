function _typeof(n){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(n)}var runtime=function(n){"use strict";var e,t=Object.prototype,o=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{l({},"")}catch(n){l=function(n,e,t){return n[e]=t}}function c(n,e,t,o){var r=e&&e.prototype instanceof y?e:y,i=Object.create(r.prototype),a=new C(o||[]);return i._invoke=function(n,e,t){var o=d;return function(r,i){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===r)throw i;return A()}for(t.method=r,t.arg=i;;){var a=t.delegate;if(a){var s=L(a,t);if(s){if(s===h)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(o===d)throw o=m,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);o=f;var l=u(n,e,t);if("normal"===l.type){if(o=t.done?m:p,l.arg===h)continue;return{value:l.arg,done:t.done}}"throw"===l.type&&(o=m,t.method="throw",t.arg=l.arg)}}}(n,t,a),i}function u(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=c;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",h={};function y(){}function g(){}function v(){}var _={};l(_,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(I([])));x&&x!==t&&o.call(x,i)&&(_=x);var b=v.prototype=y.prototype=Object.create(_);function E(n){["next","throw","return"].forEach((function(e){l(n,e,(function(n){return this._invoke(e,n)}))}))}function k(n,e){function t(r,i,a,s){var l=u(n[r],n,i);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===_typeof(d)&&o.call(d,"__await")?e.resolve(d.__await).then((function(n){t("next",n,a,s)}),(function(n){t("throw",n,a,s)})):e.resolve(d).then((function(n){c.value=n,a(c)}),(function(n){return t("throw",n,a,s)}))}s(l.arg)}var r;this._invoke=function(n,o){function i(){return new e((function(e,r){t(n,o,e,r)}))}return r=r?r.then(i,i):i()}}function L(n,t){var o=n.iterator[t.method];if(o===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=e,L(n,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=u(o,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[n.resultName]=i.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function T(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function C(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(S,this),this.reset(!0)}function I(n){if(n){var t=n[i];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,a=function t(){for(;++r<n.length;)if(o.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=e,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:e,done:!0}}return g.prototype=v,l(b,"constructor",v),l(v,"constructor",g),g.displayName=l(v,s,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,v):(n.__proto__=v,l(n,s,"GeneratorFunction")),n.prototype=Object.create(b),n},n.awrap=function(n){return{__await:n}},E(k.prototype),l(k.prototype,a,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,o,r,i){void 0===i&&(i=Promise);var a=new k(c(e,t,o,r),i);return n.isGeneratorFunction(t)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},E(b),l(b,s,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var o=e.pop();if(o in n)return t.value=o,t.done=!1,t}return t.done=!0,t}},n.values=I,C.prototype={constructor:C,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!n)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(o,r){return s.type="throw",s.arg=n,t.next=o,r&&(t.method="next",t.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(n,e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),h},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),T(t),h}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var o=t.completion;if("throw"===o.type){var r=o.arg;T(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,o){return this.delegate={iterator:I(n),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=e),h}},n}("object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports:{});try{regeneratorRuntime=runtime}catch(n){"object"===("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}!function(){"use strict";function n(){n=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,r=Object.defineProperty||function(n,e,t){n[e]=t.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{c({},"")}catch(n){c=function(n,e,t){return n[e]=t}}function u(n,e,t,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),s=new S(o||[]);return r(a,"_invoke",{value:b(n,t,s)}),a}function d(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}e.wrap=u;var p={};function f(){}function m(){}function h(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(T([])));v&&v!==t&&o.call(v,a)&&(y=v);var _=h.prototype=f.prototype=Object.create(y);function w(n){["next","throw","return"].forEach((function(e){c(n,e,(function(n){return this._invoke(e,n)}))}))}function x(n,e){function t(r,i,a,s){var l=d(n[r],n,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==_typeof(u)&&o.call(u,"__await")?e.resolve(u.__await).then((function(n){t("next",n,a,s)}),(function(n){t("throw",n,a,s)})):e.resolve(u).then((function(n){c.value=n,a(c)}),(function(n){return t("throw",n,a,s)}))}s(l.arg)}var i;r(this,"_invoke",{value:function(n,o){function r(){return new e((function(e,r){t(n,o,e,r)}))}return i=i?i.then(r,r):r()}})}function b(n,e,t){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return C()}for(t.method=r,t.arg=i;;){var a=t.delegate;if(a){var s=E(a,t);if(s){if(s===p)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===o)throw o="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);o="executing";var l=d(n,e,t);if("normal"===l.type){if(o=t.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:t.done}}"throw"===l.type&&(o="completed",t.method="throw",t.arg=l.arg)}}}function E(n,e){var t=e.method,o=n.iterator[t];if(void 0===o)return e.delegate=null,"throw"===t&&n.iterator.return&&(e.method="return",e.arg=void 0,E(n,e),"throw"===e.method)||"return"!==t&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+t+"' method")),p;var r=d(o,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var i=r.arg;return i?i.done?(e[n.resultName]=i.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function L(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function S(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(k,this),this.reset(!0)}function T(n){if(n){var e=n[a];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var t=-1,r=function e(){for(;++t<n.length;)if(o.call(n,t))return e.value=n[t],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=h,r(_,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:m,configurable:!0}),m.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,h):(n.__proto__=h,c(n,l,"GeneratorFunction")),n.prototype=Object.create(_),n},e.awrap=function(n){return{__await:n}},w(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(n,t,o,r,i){void 0===i&&(i=Promise);var a=new x(u(n,t,o,r),i);return e.isGeneratorFunction(t)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},w(_),c(_,l,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(n){var e=Object(n),t=[];for(var o in e)t.push(o);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=T,S.prototype={constructor:S,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!n)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function t(t,o){return a.type="throw",a.arg=n,e.next=t,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(n,e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),p},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),L(t),p}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var o=t.completion;if("throw"===o.type){var r=o.arg;L(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:T(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),p}},e}function e(n,e,t,o,r,i,a){try{var s=n[i](a),l=s.value}catch(n){return void t(n)}s.done?e(l):Promise.resolve(l).then(o,r)}function t(n){return function(){var t=this,o=arguments;return new Promise((function(r,i){var a=n.apply(t,o);function s(n){e(a,r,i,s,l,"next",n)}function l(n){e(a,r,i,s,l,"throw",n)}s(void 0)}))}}function o(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,r,i,a,s=[],l=!0,c=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(o=i.call(t)).done)&&(s.push(o.value),s.length!==e);l=!0);}catch(n){c=!0,r=n}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(n,e)||r(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,e){if(n){if("string"==typeof n)return i(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(n,e):void 0}}function i(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}function a(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=r(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var o=0,i=function(){};return{s:i,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return s=n.done,n},e:function(n){l=!0,a=n},f:function(){try{s||null==t.return||t.return()}finally{if(l)throw a}}}}var s,l,c,u,d,p,f,m,h,y,g,v,_,w,x,b,E,k,L,S,T,C,I,A,P,F;s=null,l=!1,c="",u="",d={},p=/.*?_(\d+)$/,f=!1,m="",h=!1,y=/^( {1,4}|\t)/,g="\n\"\"\"\nExecute Python code in code blocks (color previews added specifically for ColorAide).\n\nThis can be executed in either a Pyodide environment of a normal Python environment.\n3rd party libraries (that are not available directly from Pyodide) are only loaded\nwhen needed so that Pyodide will have a chance to load them if necessary. This is also\nhardcoded to work with ColorAide.\n\nThis is meant to be executed by Pyodide on preformatted HTML to allow for live execution of\ncode snippets using `coloraide`.\n\nTransform Python code by executing it, transforming to a Python console output,\nand finding and outputting color previews.\n\"\"\"\nimport xml.etree.ElementTree as Etree\nfrom collections.abc import Sequence, Mapping\nfrom collections import namedtuple\nimport ast\nfrom io import StringIO\nimport sys\nimport re\nfrom functools import partial\nfrom pygments import highlight\nfrom pygments.lexers import get_lexer_by_name\nfrom pygments.formatters import find_formatter_class\nfrom coloraide import Color\nfrom coloraide.interpolate import Interpolator, normalize_domain\ntry:\n    from coloraide_extras.everything import ColorAll\nexcept ImportError:\n    from coloraide.everything import ColorAll\n\nPY310 = (3, 10) <= sys.version_info\nPY311 = (3, 11) <= sys.version_info\n\nWEBSPACE = \"srgb\"\n\nAST_BLOCKS = (\n    ast.If,\n    ast.For,\n    ast.While,\n    ast.Try,\n    ast.With,\n    ast.FunctionDef,\n    ast.ClassDef,\n    ast.AsyncFor,\n    ast.AsyncWith,\n    ast.AsyncFunctionDef\n)\n\nif PY310:\n    AST_BLOCKS = AST_BLOCKS + (ast.Match,)\n\n\nif PY311:\n    AST_BLOCKS = AST_BLOCKS + (ast.TryStar,)\n\n\nRE_INIT = re.compile(r'^\\s*#\\s*pragma:\\s*init\\n(.*?)#\\s*pragma:\\s*init\\n', re.DOTALL | re.I)\n\nRE_COLOR_START = re.compile(\n    r\"(?i)(?:\\b(?<![-#&$])(?:color|hsla?|lch|lab|hwb|rgba?)\\(|\\b(?<![-#&$])[\\w]{3,}(?![(-])\\b|(?<![&])#)\"\n)\n\nLIVE_INIT = \"\"\"\nfrom coloraide import *\nimport coloraide\ntry:\n    import coloraide_extras\n    from coloraide_extras.everything import ColorAll as Color\nexcept ImportError:\n    from coloraide.everything import ColorAll as Color\n\"\"\"\n\ntemplate = '''<div class=\"playground\" id=\"__playground_{el_id}\">\n<div class=\"playground-results\" id=\"__playground-results_{el_id}\">\n{results}\n</div>\n<div class=\"playground-code hidden\" id=\"__playground-code_{el_id}\" data-search-exclude>\n<form autocomplete=\"off\">\n<textarea class=\"playground-inputs\" id=\"__playground-inputs_{el_id}\" spellcheck=\"false\">{raw_source}</textarea>\n</form>\n</div>\n\n<div data-search-exclude>\n<button id=\"__playground-edit_{el_id}\" class=\"playground-edit\" title=\"Edit the current snippet\">Edit</button>\n<button id=\"__playground-share_{el_id}\" class=\"playground-share\" title=\"Copy URL to current snippet\">Share</button>\n<button id=\"__playground-run_{el_id}\" class=\"playground-run hidden\" title=\"Run code (Ctrl + Enter)\">Run</button>\n<button id=\"__playground-cancel_{el_id}\" class=\"playground-cancel hidden\" title=\"Cancel edit (Escape)\">Cancel</button>\n</div>\n</div>'''\n\ncode_id = 0\n\n\nclass HtmlGradient(list):\n    \"\"\"HTML color gradient.\"\"\"\n\n\nclass HtmlSteps(list):\n    \"\"\"HTML color steps.\"\"\"\n\n\nclass ColorTuple(namedtuple('ColorTuple', ['string', 'color'])):\n    \"\"\"Color tuple.\"\"\"\n\n\nclass HtmlRow(list):\n    \"\"\"Create a row with the given colors.\"\"\"\n\n\nclass AtomicString(str):\n    \"\"\"Atomic string.\"\"\"\n\n\nclass Break(Exception):\n    \"\"\"Break exception.\"\"\"\n\n\nclass Continue(Exception):\n    \"\"\"Continue exception.\"\"\"\n\n\ndef _escape(txt):\n    \"\"\"Basic HTML escaping.\"\"\"\n\n    txt = txt.replace('&', '&amp;')\n    txt = txt.replace('<', '&lt;')\n    txt = txt.replace('>', '&gt;')\n    return txt\n\n\nclass StreamOut:\n    \"\"\"Override the standard out.\"\"\"\n\n    def __init__(self):\n        \"\"\"Initialize.\"\"\"\n        self.old = sys.stdout\n        self.stdout = StringIO()\n        sys.stdout = self.stdout\n\n    def read(self):\n        \"\"\"Read the stringIO buffer.\"\"\"\n\n        value = ''\n        if self.stdout is not None:\n            self.stdout.flush()\n            value = self.stdout.getvalue()\n            self.stdout = StringIO()\n            sys.stdout = self.stdout\n        return value\n\n    def __enter__(self):\n        \"\"\"Enter.\"\"\"\n        return self\n\n    def __exit__(self, type, value, traceback):  # noqa: A002\n        \"\"\"Exit.\"\"\"\n\n        sys.stdout = self.old\n        self.old = None\n        self.stdout = None\n\n\ndef get_colors(result):\n    \"\"\"Get color from results.\"\"\"\n\n    domain = []\n    if isinstance(result, AtomicString):\n        yield find_colors(result)\n\n    if isinstance(result, HtmlRow):\n        yield HtmlRow(\n            [\n                ColorTuple(c.to_string(fit=False), c.clone()) if isinstance(c, Color) else ColorTuple(c, ColorAll(c))\n                for c in result\n            ]\n        )\n    elif isinstance(result, (HtmlSteps, HtmlGradient)):\n        t = type(result)\n        yield t([c.clone() if isinstance(c, Color) else ColorAll(c) for c in result])\n    elif isinstance(result, Color):\n        yield [ColorTuple(result.to_string(fit=False), result.clone())]\n    elif isinstance(result, Interpolator):\n        # Since we are auto showing the gradient, we need to scale the domain to something we expect.\n        if result.domain:\n            domain = result.domain\n            result.domain = normalize_domain(result.domain)\n        grad = HtmlGradient(result.steps(steps=5, max_delta_e=2.3))\n        if domain:\n            result.domain = domain\n            domain = []\n        yield grad\n    elif isinstance(result, str):\n        try:\n            yield [ColorTuple(result, ColorAll(result))]\n        except Exception:\n            pass\n    elif isinstance(result, (list, tuple)):\n        for r in result:\n            for x in get_colors(r):\n                if x:\n                    yield x\n\n\ndef find_colors(text):\n    \"\"\"Find colors in text buffer.\"\"\"\n\n    colors = []\n    for m in RE_COLOR_START.finditer(text):\n        start = m.start()\n        mcolor = ColorAll.match(text, start=start)\n        if mcolor is not None:\n            colors.append(ColorTuple(text[mcolor.start:mcolor.end], mcolor.color))\n    return colors\n\n\ndef evaluate_with(node, g, loop, index=0):\n    \"\"\"Evaluate with.\"\"\"\n\n    l = len(node.items) - 1\n    withitem = node.items[index]\n    if withitem.context_expr:\n        with eval(compile(ast.Expression(withitem.context_expr), '<string>', 'eval'), g) as w:\n            g[withitem.optional_vars.id] = w\n            if index < l:\n                evaluate_with(node, g, loop, index + 1)\n            else:\n                for n in node.body:\n                    yield from evaluate(n, g, loop)\n    else:\n        with eval(compile(ast.Expression(withitem.context_expr), '<string>', 'eval'), g):\n            if index < l:\n                evaluate_with(node, g, loop, index + 1)\n            else:\n                for n in node.body:\n                    yield from evaluate(n, g, loop)\n\n\ndef compare_match(s, g, node):\n    \"\"\"Compare a match.\"\"\"\n\n    if isinstance(node, ast.MatchOr):\n        for pattern in node.patterns:\n            if compare_match(s, g, pattern):\n                return True\n    else:\n        if isinstance(node, ast.MatchValue):\n            p = eval(compile(ast.Expression(node.value), '<string>', 'eval'), g)\n            return s == p\n        elif isinstance(node, ast.MatchSingleton):\n            return s is node.value\n        elif isinstance(node, ast.MatchSequence):\n            if isinstance(s, Sequence):\n                star = isinstance(node.patterns[-1], ast.MatchStar)\n                l1, l2 = len(s), len(node.patterns)\n                if (star and l1 >= l2 - 1) or (l1 == l2):\n                    for e, p in enumerate(node.patterns[:-1] if star else node.patterns):\n                        if not compare_match(s[e], g, p):\n                            return False\n                    if star and node.patterns[-1].name:\n                        g[node.patterns[-1].name] = s[l2 - 1:]\n                    return True\n            return False\n        elif isinstance(node, ast.MatchMapping):\n            if isinstance(s, Mapping):\n                star = node.rest\n                l1, l2 = len(s), len(node.patterns)\n                if (star and l1 >= l2) or (l1 == l2):\n                    keys = set()\n                    for kp, vp in zip(node.keys, node.patterns):\n                        key = eval(compile(ast.Expression(kp), '<string>', 'eval'), g)\n                        keys.add(key)\n                        if key not in s:\n                            return False\n                        if not compare_match(s[key], g, vp):\n                            return False\n                    if star:\n                        g[star] = {k: v for k, v in s.items() if k not in keys}\n                    return True\n            return False\n        elif isinstance(node, ast.MatchClass):\n            name = g.get(node.cls.id, None)\n            if name is None:\n                raise NameError(\"name '{}' is not defined\".format(node.cls.id))\n            if not isinstance(s, name):\n                return False\n            ma = getattr(s, '__match_args__', tuple())\n            l1 = len(ma)\n            l2 = len(node.patterns)\n            if l1 < l2:\n                raise TypeError(\"{}() accepts {} positional sub-patterns ({} given)\".format(name, l1, l2))\n            for e, p in enumerate(node.patterns):\n                if not hasattr(s, ma[e]):\n                    return False\n                if not compare_match(getattr(s, ma[e]), g, p):\n                    return False\n            for a, p in zip(node.kwd_attrs, node.kwd_patterns):\n                if not hasattr(s, a):\n                    return False\n                if not compare_match(getattr(s, a), g, p):\n                    return False\n            return True\n        elif isinstance(node, ast.MatchAs):\n            if node.name is not None:\n                g[node.name] = s\n            if node.pattern:\n                return compare_match(s, g, node.pattern)\n            return True\n\n    raise RuntimeError('Unknown Match pattern {}'.format(str(node)))\n\n\ndef evaluate_except(node, e, g, loop=False):\n    \"\"\"Evaluate normal except block.\"\"\"\n\n    for n in node.handlers:\n        if n.name:\n            g[n.name] = e\n        if n.type is None:\n            for ne in n.body:\n                yield from evaluate(ne, g, loop)\n            break\n        else:\n            if isinstance(e, eval(compile(ast.Expression(n.type), '<string>', 'eval'), g)):\n                for ne in n.body:\n                    yield from evaluate(ne, g, loop)\n                break\n    else:\n        raise\n\n\ndef evaluate(node, g, loop=False):\n    \"\"\"Evaluate.\"\"\"\n\n    if loop and isinstance(node, ast.Break):\n        raise Break\n\n    if loop and isinstance(node, ast.Continue):\n        raise Continue\n\n    if isinstance(node, ast.Expr):\n        _eval = ast.Expression(node.value)\n        yield eval(compile(_eval, '<string>', 'eval'), g)\n    elif isinstance(node, ast.If):\n        if eval(compile(ast.Expression(node.test), '<string>', 'eval'), g):\n            for n in node.body:\n                yield from evaluate(n, g, loop)\n        elif node.orelse:\n            for n in node.orelse:\n                yield from evaluate(n, g, loop)\n    elif isinstance(node, ast.While):\n        while eval(compile(ast.Expression(node.test), '<string>', 'eval'), g):\n            try:\n                for n in node.body:\n                    yield from evaluate(n, g, True)\n            except Break:\n                break\n            except Continue:\n                continue\n        else:\n            for n in node.orelse:\n                yield from evaluate(n, g, loop)\n    elif isinstance(node, ast.For):\n        for x in eval(compile(ast.Expression(node.iter), '<string>', 'eval'), g):\n            g[node.target.id] = x\n            try:\n                for n in node.body:\n                    yield from evaluate(n, g, True)\n            except Break:\n                break\n            except Continue:\n                continue\n        else:\n            for n in node.orelse:\n                yield from evaluate(n, g, loop)\n    elif isinstance(node, ast.Try):\n        try:\n            for n in node.body:\n                yield from evaluate(n, g, loop)\n        except Exception as e:\n            yield from evaluate_except(node, e, g, loop)\n        else:\n            for n in node.orelse:\n                yield from evaluate(n, g, loop)\n        finally:\n            for n in node.finalbody:\n                yield from evaluate(n, g, loop)\n    elif PY311 and isinstance(node, ast.TryStar):\n        try:\n            for n in node.body:\n                yield from evaluate(n, g, loop)\n        except ExceptionGroup as e:\n            for n in node.handlers:\n                if n.name:\n                    g[n.name] = e\n                m, e = e.split(eval(compile(ast.Expression(n.type), '<string>', 'eval'), g))\n                if m is not None:\n                    for ne in n.body:\n                        yield from evaluate(ne, g, loop)\n                if e is None:\n                    break\n            if e is not None:\n                raise e\n        except Exception as e:\n            yield from evaluate_except(node, e, g, loop)\n        else:\n            for n in node.orelse:\n                yield from evaluate(n, g, loop)\n        finally:\n            for n in node.finalbody:\n                yield from evaluate(n, g, loop)\n    elif PY310 and isinstance(node, ast.Match):\n        s = eval(compile(ast.Expression(node.subject), '<string>', 'eval'), g)\n        for c in node.cases:\n            if compare_match(s, g, c.pattern):\n                if not c.guard or eval(compile(ast.Expression(c.guard), '<string>', 'eval'), g):\n                    for n in c.body:\n                        yield from evaluate(n, g, loop)\n                    break\n    elif isinstance(node, ast.With):\n        yield from evaluate_with(node, g, loop)\n    else:\n        _exec = ast.Module([node], [])\n        exec(compile(_exec, '<string>', 'exec'), g)\n        yield None\n\n\ndef execute(cmd, no_except=True, inline=False, init='', g=None):\n    \"\"\"Execute color commands.\"\"\"\n\n    console = ''\n    colors = []\n\n    # Setup global initialization\n    if g is None:\n        g = {\n            'HtmlRow': HtmlRow,\n            'HtmlSteps': HtmlSteps,\n            'HtmlGradient': HtmlGradient\n        }\n    if init:\n        execute(init.strip(), g=g)\n\n    # Build AST tree\n    m = RE_INIT.match(cmd)\n    if m:\n        block_init = m.group(1)\n        src = cmd[m.end():]\n        execute(block_init, g=g)\n    else:\n        src = cmd\n    lines = src.split('\\n')\n    try:\n        tree = ast.parse(src)\n    except Exception as e:\n        if no_except:\n            if not inline:\n                from pymdownx.superfences import SuperFencesException\n                raise SuperFencesException from e\n            else:\n                from pymdownx.inlinehilite import InlineHiliteException\n                raise InlineHiliteException from e\n        import traceback\n        return '{}'.format(traceback.format_exc()), colors\n\n    for node in tree.body:\n        result = []\n\n        # Format source as Python console statements\n        start = node.lineno\n        end = node.end_lineno\n        stmt = lines[start - 1: end]\n        command = ''\n        for i, line in enumerate(stmt, 0):\n            if i == 0:\n                stmt[i] = '>>> ' + line\n            else:\n                stmt[i] = '... ' + line\n        command += '\\n'.join(stmt)\n        if isinstance(node, AST_BLOCKS):\n            command += '\\n... '\n\n        try:\n            # Capture anything sent to standard out\n            with StreamOut() as s:\n                # Execute code\n                for x in evaluate(node, g):\n                    result.append(x)\n\n                    # Output captured standard out after statements\n                    text = s.read()\n                    if text:\n                        result.append(AtomicString(text))\n\n                # Execution went well, so append command\n                console += command\n\n        except Exception as e:\n            if no_except:\n                if not inline:\n                    from pymdownx.superfences import SuperFencesException\n                    raise SuperFencesException from e\n                else:\n                    from pymdownx.inlinehilite import InlineHiliteException\n                    raise InlineHiliteException from e\n            import traceback\n            console += '{}\\n{}'.format(command, traceback.format_exc())\n            # Failed for some reason, so quit\n            break\n\n        # If we got a result, output it as well\n        result_text = '\\n'\n        for r in result:\n            if r is None:\n                continue\n            for clist in get_colors(r):\n                if clist:\n                    colors.append(clist)\n            result_text += '{}{}'.format(str(r), '\\n' if not isinstance(r, AtomicString) else '')\n        console += result_text\n\n    return console, colors\n\n\ndef colorize(src, lang, **options):\n    \"\"\"Colorize.\"\"\"\n\n    HtmlFormatter = find_formatter_class('html')\n    lexer = get_lexer_by_name(lang, **options)\n    formatter = HtmlFormatter(cssclass=\"highlight\", wrapcode=True)\n    return highlight(src, lexer, formatter).strip()\n\n\ndef color_command_validator(language, inputs, options, attrs, md):\n    \"\"\"Color validator.\"\"\"\n\n    valid_inputs = set(['exceptions'])\n\n    for k, v in inputs.items():\n        if k in valid_inputs:\n            options[k] = True\n            continue\n        attrs[k] = v\n    return True\n\n\ndef _color_command_console(colors):\n    \"\"\"Color command formatter.\"\"\"\n\n    el = ''\n    bar = False\n    values = []\n    for item in colors:\n        if isinstance(item, (HtmlGradient, HtmlSteps)):\n            current = total = percent = last = 0\n            if isinstance(item, HtmlSteps):\n                total = len(item)\n                percent = 100 / total\n                current = percent\n\n            if bar:\n                el += '<div class=\"swatch-bar\">{}</div>'.format(' '.join(values))\n                values = []\n            sub_el1 = '<div class=\"swatch-bar\"><span class=\"swatch swatch-gradient\">{}</span></div>'\n            style = \"--swatch-stops: \"\n            stops = []\n            for e, color in enumerate(item):\n                color.fit(WEBSPACE)\n                if current:\n                    stops.append('{} {}%'.format(color.convert(WEBSPACE).to_string(), str(last)))\n                    stops.append('{} {}%'.format(color.convert(WEBSPACE).to_string(), str(current)))\n                    last = current\n                    if e < (total - 1):\n                        current += percent\n                    else:\n                        current = 100\n                else:\n                    stops.append(color.convert(WEBSPACE).to_string())\n            if not stops:\n                stops.extend(['transparent'] * 2)\n            if len(stops) == 1:\n                stops.append(stops[0])\n            style += ','.join(stops)\n            sub_el2 = '<span class=\"swatch-color\" style=\"{}\"></span>'.format(style)\n            el += sub_el1.format(sub_el2)\n            bar = False\n        else:\n            is_row = False\n            if isinstance(item, HtmlRow):\n                is_row = True\n                if bar and values:\n                    el += '<div class=\"swatch-bar\">{}</div>'.format(' '.join(values))\n                    values = []\n                bar = False\n\n            bar = True\n            for color in item:\n                base_classes = \"swatch\"\n                if not color.color.in_gamut(WEBSPACE):\n                    base_classes += \" out-of-gamut\"\n                color.color.fit(WEBSPACE)\n                srgb = color.color.convert(WEBSPACE)\n                value1 = srgb.to_string(alpha=False)\n                value2 = srgb.to_string()\n                style = \"--swatch-stops: {} 50%, {} 50%\".format(value1, value2)\n                title = color.string\n                classes = base_classes\n                c = '<span class=\"swatch-color\" style=\"{style}\"></span>'.format(style=style)\n                c = '<span class=\"{classes}\" title=\"{title}&#013;Copy to clipboard\">{color}</span>'.format(\n                    classes=classes,\n                    color=c,\n                    title=title\n                )\n                values.append(c)\n\n            if is_row and values:\n                el += '<div class=\"swatch-bar\">{}</div>'.format(' '.join(values))\n                values = []\n                bar = False\n    if bar:\n        el += '<div class=\"swatch-bar\">{}</div>'.format(' '.join(values))\n        values = []\n\n    return el\n\n\ndef _color_command_formatter(src=\"\", language=\"\", class_name=None, options=None, md=\"\", init='', **kwargs):\n    \"\"\"Formatter wrapper.\"\"\"\n\n    global code_id\n    from pymdownx.superfences import SuperFencesException\n\n    try:\n        if len(md.preprocessors['fenced_code_block'].extension.stash) == 0:\n            code_id = 0\n\n        # Check if we should allow exceptions\n        exceptions = options.get('exceptions', False) if options is not None else False\n\n        console, colors = execute(src.strip(), not exceptions, init=init)\n        el = _color_command_console(colors)\n\n        el += md.preprocessors['fenced_code_block'].extension.superfences[0]['formatter'](\n            src=console,\n            class_name=\"highlight\",\n            language='pycon',\n            md=md,\n            options=options,\n            **kwargs\n        )\n        el = '<div class=\"color-command\">{}</div>'.format(el)\n        el = template.format(el_id=code_id, raw_source=_escape(src), results=el)\n        code_id += 1\n    except SuperFencesException:\n        raise\n    except Exception:\n        from pymdownx import superfences\n        import traceback\n        print(traceback.format_exc())\n        return superfences.fence_code_format(src, 'text', class_name, options, md, **kwargs)\n    return el\n\n\ndef color_command_formatter(init='', interactive=False):\n    \"\"\"Return a Python command formatter with the provided imports.\"\"\"\n\n    return partial(_color_command_formatter, init=init, interactive=interactive)\n\n\ndef _color_formatter(src=\"\", language=\"\", class_name=None, md=\"\", exceptions=True, init=''):\n    \"\"\"Formatter wrapper.\"\"\"\n\n    from pymdownx.inlinehilite import InlineHiliteException\n\n    try:\n        result = src.strip()\n\n        try:\n            color = ColorAll(result.strip())\n        except Exception:\n            _, colors = execute(result, exceptions, inline=True, init=init)\n            if len(colors) != 1 or len(colors[0]) != 1:\n                if exceptions:\n                    raise InlineHiliteException('Only one color allowed')\n                else:\n                    raise ValueError('Only one color allowed')\n            color = colors[0][0].color\n            result = colors[0][0].string\n\n        el = Etree.Element('span')\n        stops = []\n        if not color.in_gamut(WEBSPACE):\n            color.fit(WEBSPACE)\n            attributes = {'class': \"swatch out-of-gamut\", \"title\": result}\n            sub_el = Etree.SubElement(el, 'span', attributes)\n            stops.append(color.convert(WEBSPACE).to_string(hex=True, alpha=False))\n            if color[-1] < 1.0:\n                stops[-1] += ' 50%'\n                stops.append(color.convert(WEBSPACE).to_string(hex=True) + ' 50%')\n        else:\n            attributes = {'class': \"swatch\", \"title\": result}\n            sub_el = Etree.SubElement(el, 'span', attributes)\n            stops.append(color.convert(WEBSPACE).to_string(hex=True, alpha=False))\n            if color[-1] < 1.0:\n                stops[-1] += ' 50%'\n                stops.append(color.convert(WEBSPACE).to_string(hex=True) + ' 50%')\n\n        if not stops:\n            stops.extend(['transparent'] * 2)\n        if len(stops) == 1:\n            stops.append(stops[0])\n\n        Etree.SubElement(\n            sub_el,\n            'span',\n            {\n                \"class\": \"swatch-color\",\n                \"style\": \"--swatch-stops: {};\".format(','.join(stops))\n            }\n        )\n\n        el.append(md.inlinePatterns['backtick'].handle_code('css-color', result))\n    except InlineHiliteException:\n        raise\n    except Exception:\n        import traceback\n        print(traceback.format_exc())\n        el = md.inlinePatterns['backtick'].handle_code('text', src)\n    return el\n\n\ndef color_formatter(init=''):\n    \"\"\"Return a Python command formatter with the provided imports.\"\"\"\n\n    return partial(_color_formatter, init=init)\n\n\n#############################\n# Pyodide specific code\n#############################\ndef _live_color_command_formatter(src, init=''):\n    \"\"\"Formatter wrapper.\"\"\"\n\n    try:\n        console, colors = execute(src.strip(), False, init=init)\n        el = _color_command_console(colors)\n\n        if not colors:\n            el += '<div class=\"swatch-bar\"></div>'\n\n        el += colorize(console, 'pycon', **{'python3': True, 'stripnl': False})\n        el = '<div class=\"color-command\">{}</div>'.format(el)\n    except Exception:\n        import traceback\n        return '<div class=\"color-command\"><div class=\"swatch-bar\"></div>{}</div>'.format(\n            colorize(traceback.format_exc(), 'pycon')\n        )\n    return el\n\n\ndef live_color_command_formatter(init=''):\n    \"\"\"Return a Python command formatter with the provided imports.\"\"\"\n\n    return partial(_live_color_command_formatter, init=init)\n\n\ndef live_color_command_validator(language, inputs, options, attrs, md):\n    \"\"\"Color validator.\"\"\"\n\n    value = color_command_validator(language, inputs, options, attrs, md)\n    # Live edit, we always allow exceptions so not to crash the service.\n    options['exceptions'] = True\n    return value\n\n\ndef render_console(*args):\n    \"\"\"Render console update.\"\"\"\n\n    from js import document\n\n    try:\n        # Run code\n        inputs = document.getElementById(\"__playground-inputs_{}\".format(globals()['id_num']))\n        results = document.getElementById(\"__playground-results_{}\".format(globals()['id_num']))\n        result = live_color_command_formatter(LIVE_INIT)(inputs.value)\n        temp = document.createElement('div')\n        temp.innerHTML = result\n\n        # Replace swatch bars\n        cmd = results.querySelector('.color-command')\n        for el in cmd.querySelectorAll('.swatch-bar'):\n            el.remove()\n        for el in temp.querySelectorAll('.swatch-bar'):\n            cmd.insertBefore(el, cmd.lastChild)\n\n        # Update code content\n        pre = cmd.querySelector('pre')\n        pre.replaceChild(temp.querySelector('code'), pre.querySelector('code'))\n\n        # Clean up stray element.\n        temp.remove()\n\n        # Adjust scorlling\n        scrollingElement = results.querySelector('code')\n        scrollingElement.scrollTop = scrollingElement.scrollHeight\n    except Exception as e:\n        print(e)\n\n\ndef render_notebook(*args):\n    \"\"\"Render notebook.\"\"\"\n\n    import markdown\n    from pymdownx import slugs, superfences\n    from js import document\n\n    text = globals().get('content', '')\n    extensions = [\n        'markdown.extensions.toc',\n        'markdown.extensions.smarty',\n        'pymdownx.betterem',\n        'markdown.extensions.attr_list',\n        'markdown.extensions.tables',\n        'markdown.extensions.abbr',\n        'markdown.extensions.footnotes',\n        'pymdownx.superfences',\n        'pymdownx.highlight',\n        'pymdownx.inlinehilite',\n        'pymdownx.magiclink',\n        'pymdownx.tilde',\n        'pymdownx.caret',\n        'pymdownx.smartsymbols',\n        'pymdownx.emoji',\n        'pymdownx.escapeall',\n        'pymdownx.tasklist',\n        'pymdownx.striphtml',\n        'pymdownx.snippets',\n        'pymdownx.keys',\n        'pymdownx.saneheaders',\n        'pymdownx.arithmatex',\n        'pymdownx.blocks.admonition',\n        'pymdownx.blocks.details',\n        'pymdownx.blocks.html',\n        'pymdownx.blocks.definition',\n        'pymdownx.blocks.tab'\n    ]\n    extension_configs = {\n        'markdown.extensions.toc': {\n            'slugify': slugs.slugify(case=\"lower\"),\n            'permalink': \"\"\n        },\n        'markdown.extensions.smarty': {\n            \"smart_quotes\": False,\n        },\n        'pymdownx.arithmatex': {\n            'generic': True,\n            'block_tag': 'pre'\n        },\n        'pymdownx.superfences': {\n            'preserve_tabs': True,\n            'custom_fences': [\n                {\n\n                    \"name\": \"diagram\",\n                    \"class\": \"diagram\",\n                    \"format\": superfences.fence_code_format\n                },\n                {\n                    \"name\": 'playground',\n                    \"class\": 'playground',\n                    \"format\": color_command_formatter(LIVE_INIT),\n                    \"validator\": live_color_command_validator\n                }\n            ]\n        },\n        'pymdownx.inlinehilite': {\n            'custom_inline': [\n                {\n                    'name': 'color',\n                    'class': 'color',\n                    'format': color_formatter(LIVE_INIT)\n                }\n            ]\n        },\n        'pymdownx.magiclink': {\n            'repo_url_shortener': True,\n            'repo_url_shorthand': True,\n            'social_url_shorthand': True,\n            'user': 'facelessuser',\n            'repo': 'coloraide'\n        },\n        'pymdownx.keys': {\n            'separator': \"\\uff0b\"\n        },\n        'pymdownx.blocks.tab': {\n            'alternate_style': True\n        },\n        'pymdownx.blocks.admonition': {\n            'types': [\n                'new', 'settings', 'note', 'abstract', 'info', 'tip', 'success',\n                'question', 'warning', 'failure', 'danger', 'bug', 'example', 'quote'\n            ]\n        }\n    }\n\n    try:\n        html = markdown.markdown(text, extensions=extensions, extension_configs=extension_configs)\n    except Exception:\n        html = ''\n    content = document.getElementById(\"__notebook-render\")\n    content.innerHTML = html\n\n\naction = globals().get('action')\nif action == 'notebook':\n    callback = render_notebook\nelse:\n    callback = render_console\n\ncallback()\n",v=window.colorNotebook.defaultPlayground,_=function(n){return"\n/// new | This notebook is powered by [Pyodide](https://github.com/pyodide/pyodide). Learn more [here](?notebook=https://gist.githubusercontent.com/facelessuser/7c819668b5eb248ecb9ac608d91391cf/raw/playground.md). Preview, convert, interpolate, and explore!\n///\n\n````````playground\n".concat(n,"\n````````\n")},w=!1,x=!1,b=function(){h=!0,window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0,cancelable:!0})),window.document$.next()},E=function(n){var e=window.pageXOffset||(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop;n.style.height="5px",n.style.height="".concat(n.scrollHeight,"px"),window.scrollTo(e,t)},k=function(n){return encodeURIComponent(n).replace(/[.!'()*]/g,(function(n){return"%".concat(n.charCodeAt(0).toString(16))}))},L=function(){var e=t(n().mark((function e(t){var o;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o=document.getElementById("__playground-inputs_".concat(t))).setAttribute("readonly",""),s.globals.set("id_num",t),s.globals.set("action","playground"),n.next=6,s.runPythonAsync(g);case 6:o.removeAttribute("readonly");case 7:case"end":return n.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=t(n().mark((function e(t){var o;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.globals.set("content",t),s.globals.set("action","notebook"),n.next=4,s.runPythonAsync(g);case 4:(o=document.getElementById("__notebook-input"))&&(c=t,o.value=t),window.location.hash&&(window.location.href=window.location.href);case 7:case"end":return n.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=t(n().mark((function e(t){var o,r,i,l,c,u;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(f){n.next=5;break}return f=!0,n.next=4,loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.22.1/full/",fullStdLib:!1});case 4:s=n.sent;case 5:if((w||!t)&&(x||t)){n.next=14;break}o="".concat(window.location.origin,"/").concat(window.location.pathname.split("/")[1],"/playground/"),r=t?window.colorNotebook.notebookWheels:window.colorNotebook.playgroundWheels,i=[],t?w=!0:x=!0,l=a(r);try{for(l.s();!(c=l.n()).done;)(u=c.value).includes("/")?i.push(o+u):i.push(u)}catch(n){l.e(n)}finally{l.f()}return n.next=14,s.loadPackage(i);case 14:case"end":return n.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(n,e,t){var o=null==e?"Loading...":e,r=t?"loading relative":"loading",i=document.createElement("template");i.innerHTML='<div class="'.concat(r,'"><div class="loader"></div><div>').concat(o,"</div></div>"),n.appendChild(i.content.firstChild)},I=function(n){n.querySelector(".loading")&&n.removeChild(n.querySelector(".loading"))},A=function(n){if("Tab"===n.key){var e=n.target;if(e.selectionStart!==e.selectionEnd){n.preventDefault();for(var t=e.selectionStart,o=e.selectionEnd,r=e.value;t>0&&"\n"!==r[t-1];)t--;for(;o>0&&"\n"!==r[o-1]&&o<r.length;)o++;for(var i=r.substr(t,o-t).split("\n"),a=0;a<i.length;a++)a===i.length-1&&0===i[a].length||(n.shiftKey?i[a]=i[a].replace(y,""):i[a]="    ".concat(i[a]));i=i.join("\n"),e.value=r.substr(0,t)+i+r.substr(o),e.selectionStart=t,e.selectionEnd=t+i.length}}},P=function(){var e=t(n().mark((function e(o){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=document.getElementById("__notebook-source"),document.querySelectorAll(".playground").forEach((function(e){var i=e.id.replace(p,"$1"),a=document.getElementById("__playground-inputs_".concat(i)),s=document.getElementById("__playground-results_".concat(i)),f=document.getElementById("__playground-code_".concat(i)),m=document.querySelector("button#__playground-edit_".concat(i)),h=document.querySelector("button#__playground-share_".concat(i)),y=document.querySelector("button#__playground-run_".concat(i)),g=document.querySelector("button#__playground-cancel_".concat(i));if(a.addEventListener("input",(function(){E(a)})),a.addEventListener("keydown",A),r&&o){var v=document.getElementById("__notebook-input");v.addEventListener("input",(function(n){E(n.target)})),v.addEventListener("keydown",A),document.getElementById("__notebook-edit").addEventListener("click",(function(){d[v.id]=v.value,document.getElementById("__notebook-render").classList.toggle("hidden"),document.getElementById("__notebook-source").classList.toggle("hidden"),E(document.getElementById("__notebook-input"))})),document.getElementById("__notebook-md-gist").addEventListener("click",function(){var e=t(n().mark((function e(t){var o;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null!==(o=prompt("Please enter link to the Markdown page source:",u))&&(o=k(o),t.preventDefault(),history.pushState({notebook:o},"","?".concat(new URLSearchParams("notebook=".concat(o)).toString())),F(!1));case 2:case"end":return n.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),document.getElementById("__notebook-py-gist").addEventListener("click",function(){var e=t(n().mark((function e(t){var o;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null!==(o=prompt("Please enter the link to the Python code source:",u))&&(o=k(o),t.preventDefault(),history.pushState({source:o},"","?".concat(new URLSearchParams("source=".concat(o)).toString())),F(!1));case 2:case"end":return n.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),document.getElementById("__notebook-input").value=c,document.getElementById("__notebook-cancel").addEventListener("click",(function(){v.value=d[v.id],delete d[v.id],document.getElementById("__notebook-render").classList.toggle("hidden"),document.getElementById("__notebook-source").classList.toggle("hidden")})),document.getElementById("__notebook-submit").addEventListener("click",t(n().mark((function e(){var t,o;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=document.getElementById("__notebook-render"),c=document.getElementById("__notebook-input").value,t.classList.toggle("hidden"),document.getElementById("__notebook-source").classList.toggle("hidden"),o=document.querySelector("article"),C(o,"Loading Notebook..."),t.innerHTML="",d={},n.next=10,T(!0);case 10:return n.next=12,S(c);case 12:return n.next=14,P();case 14:I(o),b();case 16:case"end":return n.stop()}}),e)}))))}a.addEventListener("touchmove",(function(n){n.stopPropagation()})),s.addEventListener("click",(function(n){var e=n.target;if(e.matches("span.swatch-color")){var t="",o=e.parentNode;if(!o.matches("span.swatch-gradient")){if(t=(t=o.getAttribute("title").replace("Copy to clipboard","")).replace("\n",""),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var r=document.createElement("textarea");r.textContent=t,r.style.position="fixed",document.body.appendChild(r),r.select();try{return document.execCommand("copy")}catch(n){return prompt("Copy to clipboard: Ctrl+C, Enter",t)}finally{document.body.removeChild(r)}}}}})),m.addEventListener("click",t(n().mark((function e(){return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:d[i]=a.value,f.classList.toggle("hidden"),s.classList.toggle("hidden"),y.classList.toggle("hidden"),g.classList.toggle("hidden"),m.classList.toggle("hidden"),h.classList.toggle("hidden"),E(a),a.focus();case 9:case"end":return n.stop()}}),e)})))),h.addEventListener("click",t(n().mark((function e(){var o,r,i,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=window.location.pathname.split("/")[1],r=k(a.value),i=window.location,s="/playground/",i.pathname.startsWith("/".concat(o,"/"))&&(s="/".concat(o,"/playground/")),(l="".concat(i.protocol,"//").concat(i.host).concat(s,"?code=").concat(r)).length>2e3?alert("Code must be small enough to generate a shareable URL under 2000 characters!"):navigator.clipboard.writeText(l).then(t(n().mark((function e(){return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:alert("Link copied to clipboard :)");case 1:case"end":return n.stop()}}),e)}))),t(n().mark((function e(){return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:alert("Failed to copy link clipboard!");case 1:case"end":return n.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e)})))),y.addEventListener("click",t(n().mark((function e(){var t,o;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!l){n.next=2;break}return n.abrupt("return");case 2:return l=!0,t=f.querySelector("form"),C(t,null,!0),(o=document.querySelectorAll(".playground .playground-run"))&&o.forEach((function(n){n.setAttribute("disabled","")})),n.next=9,T(!1);case 9:return s.querySelector("code").innerHTML="",n.next=12,L(i);case 12:o&&o.forEach((function(n){n.removeAttribute("disabled")})),I(t),f.classList.toggle("hidden"),s.classList.toggle("hidden"),m.classList.toggle("hidden"),h.classList.toggle("hidden"),y.classList.toggle("hidden"),g.classList.toggle("hidden"),delete d[i],l=!1;case 22:case"end":return n.stop()}}),e)})))),g.addEventListener("click",(function(){a.value=d[i],delete d[i],f.classList.toggle("hidden"),s.classList.toggle("hidden"),m.classList.toggle("hidden"),h.classList.toggle("hidden"),y.classList.toggle("hidden"),g.classList.toggle("hidden")}))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),F=function(){var e=t(n().mark((function e(o){var r,i,a,s,l,c,p,f,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d={},!window.location.pathname.endsWith("/playground/")){e.next=32;break}if(r=new URLSearchParams(window.location.search),i="Loading Pyodide...",a="Loading Notebook...",s=r.has("source")?r.get("source"):r.get("notebook"),l=document.querySelector("article"),null===s||!s.trim()){e.next=16;break}return C(l,i),e.next=11,T(!0);case 11:I(l),C(l,a);try{c=r.has("source")?"source":"notebook",m=decodeURIComponent(r.toString()),p="",f=new XMLHttpRequest,u=s,f.open("GET",s,!0),f.onload=t(n().mark((function e(){return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return 4===f.readyState&&200===f.status&&(p=f.responseText),"source"===c&&(p=_(p)),n.next=4,S(p);case 4:return n.next=6,P(o);case 6:I(l),b();case 8:case"end":return n.stop()}}),e)}))),f.send()}catch(n){}e.next=30;break;case 16:return u="",h=_(r.has("code")?r.get("code"):v),m=decodeURIComponent(r.toString()),C(l,i),e.next=22,T(!0);case 22:return I(l),C(l,a),e.next=26,S(h);case 26:return e.next=28,P(o);case 28:I(l),b();case 30:e.next=35;break;case 32:u="",m="",P(o);case 35:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),document.addEventListener("click",(function(n){var e=window.location.pathname.split("/")[1],t=n.target||n.srcElement;if("A"===t.tagName&&F&&t.getAttribute("href")&&t.host===window.location.host&&window.location.pathname==="/".concat(e,'/playground/"')&&window.location.pathname===t.pathname&&window.location.search!==t.search){n.preventDefault();var r,i={},s=a(new URLSearchParams(t.search));try{for(s.s();!(r=s.n()).done;){var l=o(r.value,2),c=l[0],u=l[1];i[c]=u}}catch(n){s.e(n)}finally{s.f()}history.pushState(i,"",t.href),F(!1)}})),window.addEventListener("popstate",(function(){var n=window.location.pathname.split("/")[1];window.location.pathname==="/".concat(n,"/playground/")&&decodeURIComponent(new URLSearchParams(window.location.search).toString())!==m&&F(!1)})),window.addEventListener("unload",(function(){h=!1})),window.document$.subscribe((function(){h?h=!1:F(!0)}))}();
//# sourceMappingURL=extra-notebook-b5cf7553.js.map
